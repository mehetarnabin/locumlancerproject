{% extends 'provider/base.html.twig' %}

{% block title %}My Applications{% endblock %}

{% block provider_body %}

<style>
.job-header, .job-row {
    display: flex;
    align-items: center;
}

.col-job,
.col-location,
.col-schedule,
.col-expiry,
.col-start,
.col-action {
    flex: 1;
    min-width: 130px;
}
.col-job {
    flex: 2;
}
.job-header {
    padding-left: 14px;
    padding-right: 14px;
    color: #121C0C;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    border-radius: 10px;
    border: 1px solid #e6eef6;
    height: 48px;
    margin-bottom: 2px;
}
.job-row {
    border: none;
    padding: 3px 14px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin: 2px 0;
    font-size: 14px;
    border-radius: 10px;
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
}
.truncate-text {
    display: inline-block;
    max-width: 180px; /* Adjust as needed */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: middle;
}
.job-section {
    background-color: #fff;
}
.job-check {
    margin-right: 8px;
    transform: scale(1.2);
}
#toggleActions {
    padding: 6px 16px;
    border-radius: 18px;
    border: 1px solid #ddd;
    font-size: 16px;
    color: #fff;
}
.job-meta {
    margin-top: 1px;
}
.ml-15-px {
    margin-left: 15px;
}
.mr-15-px {
    margin-right: 15px;
}
.action-btn {
    background: transparent;
    border: none;
    padding: 0 4px;
}

.custom-dropdown {
  position: absolute;
  top: 110%;
  left: 0;
  background: #fff;
  padding: 10px;
  min-width: 150px;
  z-index: 1000;
  border: 1px solid #e6eef6;
  box-shadow: 0 2px 6px rgba(11,22,40,0.03);
  border-radius: 10px;
}

.hidden {
  display: none;
}

.columns-panel label {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
  cursor: pointer;
  font-weight: 400;
  color: #121C0C;
}

.menu-panel .menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  cursor: pointer;
  color: #121C0C;
}

.menu-panel svg {
  width: 16px;
  height: 16px;
}

.dropdown-cstm {
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    border-radius: 10px;
    padding: 4px 12px;
}

.menu-panel {
    min-width: 160px;
}

.columns-panel input[type="checkbox"] {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #e6eef6;
  border-radius: 4px;
  background-color: #fff;
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

.columns-panel input[type="checkbox"]:checked {
  background-color: #47ddff; /* Your custom fill color */
  border-color: #47ddff;
}

.columns-panel input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 5px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.col-check input[type="checkbox"] {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #e6eef6;
  border-radius: 4px;
  background-color: #fff;
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

.col-check input[type="checkbox"]:checked {
  background-color: #47ddff; /* Your custom fill color */
  border-color: #47ddff;
}

.col-check input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 5px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.job-title {
    color: #121C0C;
}

.action-btn {
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    border-radius: 10px;
    padding: 4px 12px;
    display: flex;
    gap: 6px;
    align-items: center;
}
.action-btn, ..dropdown-cstm {
    transition: all 0.2s ease;
}
.action-btn:hover, .dropdown-cstm:hover {
    color: #85BB65;
    border: 1px solid #85BB65;
    transition: all 0.2s ease;
}
.action-btn:hover svg {
    color: #85BB65;
}
#delete-btn:hover {
    color: #BA1824;
    border: 1px solid #BA1824;
    transition: all 0.2s ease; 
}
#delete-btn:hover svg {
    color: #BA1824;
}
.col-center {
    text-align: center;
}
.col-rank {
    min-width: 50px;
    max-width: 50px;
}
.application .card {
  clip-path: polygon(0% 0%,calc(100% - 15px) 0%,100% 50%,calc(100% - 15px) 100%,0% 100%,15px 50%,0% 0%);
  display: flex;
  justify-content: center;
  align-items: center;
  flex: 1 0 auto;
  margin-left: -15px;
  cursor: pointer;
}

/* First card: no left cutout */
.application .col:first-child .card {
    clip-path:none;
    margin-left: 0;
    height: 65px;
    align-items: center;
    justify-content: center;
}
.application .col:first-child {
    max-width: 80px;
}
.application .col .card-body {
    justify-content: center;
    flex-direction: column-reverse;
    text-align: center;
    align-items: center;
}
.application .col .card-body .card-title {
    font-size: 16px;
}
.is-card.is-applied:hover *, .is-card.is-review:hover *, .is-card.is-interview:hover *, .is-card.is-rejected:hover *, .is-card.is-hired:hover *, .is-card.is-offered:hover *, .is-card.is-completed:hover *, .is-card.is-applied.active *, .is-card.is-review.active *, .is-card.is-interview.active *, .is-card.is-rejected.active *, .is-card.is-hired.active *, .is-card.is-offered.active *, .is-card.is-completed.active *, .is-card .card-body p, .is-card .card-body:hover, .application .col .card-body .card-title:hover, .is-card:hover {
    color: rgb(33, 37, 41);
}
.application .col .card-body p {
    font-size: 18px;
    color: #121C0C;
}
.application .col:first-child .card .card-body {
    align-items: center;
}
.application .col:nth-child(2) .card {
  clip-path: polygon(0% 0%,calc(100% - 15px) 0%,100% 50%,calc(100% - 15px) 100%,0% 100%,0% 0%);
  margin-left: 0;
}
.application .col:last-child .card {
    clip-path: polygon(0% 0%,100% 0%,100% 100%,0% 100%,15px 50%,0% 0%);
}
.application .col:first-child .card-body p {
    display: none;
}
.application .col:first-child .card-body .card-title {
    font-size: 18px;
}
.col:nth-child(1) .is-card {
  background-color: #D2E6C6;
}
.col:nth-child(2) .is-card {
  background-color: #C7E0B8;
}
.col:nth-child(3) .is-card {
  background-color: #BBDAAA;
}
.col:nth-child(4) .is-card {
  background-color: #AFD39C;
}
.col:nth-child(5) .is-card {
  background-color: #A4CC8E;
}
.col:nth-child(6) .is-card {
  background-color: #99C680;
}
.col:nth-child(7) .is-card {
  background-color: #8DC072;
}
.col:nth-child(8) .is-card {
  background-color: #82B964;
}

.col:nth-child(1) .is-card:hover {
  background-color: #B9F2FF;
}
.col:nth-child(2) .is-card:hover {
  background-color: #ADF0FF;
}
.col:nth-child(3) .is-card:hover {
  background-color: #99ECFF;
}
.col:nth-child(4) .is-card:hover {
  background-color: #85E9FF;
}
.col:nth-child(5) .is-card:hover {
  background-color: #70E5FF;
}
.col:nth-child(6) .is-card:hover {
  background-color: #5CE1FF;
}
.col:nth-child(7) .is-card:hover {
  background-color: #47DDFF;
}
.col:nth-child(8) .is-card:hover {
  background-color: #33DAFF;
}
.col .is-card.is-applied.active {
    background-color: #99ECFF;
}
.col .is-card.is-interview.active {
    background-color: #85E9FF;
}
.col .is-card.is-offered.active {
    background-color: #70E5FF;
}
.col .is-card.is-hired.active {
    background-color: #5CE1FF;
}
.col .is-card.is-completed.active {
    background-color: #47DDFF;
}
.badge.badge-pill {
    background: none;
    animation: colorChange 1s infinite alternate;
    font-weight: 400 !important;
}
@keyframes colorChange {
    0% {
        color: #0096B8;
    }
    100% {
        color: #33DAFF;
    }
}
.job-actions a {
    color : #000;
}
.job-actions a:hover {
    color : #85BB65;
}
</style>

    {% set statusColors = {
        'saved': 'saved',
        'applied': 'applied',
        'interview': 'interview',
        'negotiating': 'offered',
        'accepted' : 'hired',
        'completed': 'completed',
    } %}

    {% set allStatuses = ['saved', 'applied', 'interview', 'negotiating', 'accepted', 'completed'] %}

    <div class="container-xl">
        <div class="job-section shadow-lg p-3 rounded-3">

            <div class="application">
                <div class="row g-2">
                    <div class="col">
                        <a href="{{ path('app_provider_jobs_applications') }}">
                            <div class="card is-card mb-3 is-applied {% if app.request.get('status') and app.request.get('status') == '' %}active{% endif %}">
                                <div class="card-body">
                                    <h6 class="card-title">All</h6>
                                    <p class="card-text">{{ totalApplications|number_format }}</p>
                                </div>
                            </div>
                        </a>
                    </div>

                    {% for status in allStatuses %}
                        {% set count = 0 %}
                        {% for item in statusCounts %}
                            {% if item.status == status %}
                                {% set count = item.count %}
                            {% endif %}
                        {% endfor %}
                        <div class="col">
                            <a href="{% if status == 'saved' %}{{ path('app_provider_jobs_saved') }}{% else %}{{ path('app_provider_jobs_applications', {'status': status}) }}{% endif %}">
                            <div class="card is-card mb-3 is-{{ statusColors[status] }} {% if app.request.get('status') == status or (status == 'saved' and app.request.get('_route') == 'app_provider_jobs_saved') %}active{% endif %}">
                                <div class="card-body">
                                    <h6 class="card-title">{{ status | replace({'_': ' '}) | title }}</h6>
                                    <p class="card-text">{{ count }}</p>
                                    {#   {% if status == 'applied' %}
                                        <img src="{{ asset('assets/icons/submit.png') }}" class="icon-image" alt="">
                                    {% elseif status == 'in_review' %}
                                        <img src="{{ asset('assets/icons/magnifying-glass.png') }}" class="icon-image" alt="">
                                    {% elseif status == 'interview' %}
                                        <img src="{{ asset('assets/icons/hired.png') }}" class="icon-image" alt="">
                                    {% elseif status == 'offered' %}
                                        <img src="{{ asset('assets/icons/invitation-letter.png') }}" class="icon-image" alt="">
                                    {% elseif status == 'rejected' %}
                                        <img src="{{ asset('assets/icons/no-internet.png') }}" class="icon-image" alt="">
                                    {% elseif status == 'hired' %}
                                        <img src="{{ asset('assets/icons/campus.png') }}" class="icon-image" alt="">
                                    {% elseif status == 'completed' %}
                                        <img src="{{ asset('assets/icons/flag.png') }}" class="icon-image" alt="">
                                    {% endif %} #}
                                </div>
                            </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="actions-container d-flex justify-content-between align-items-center ml-15-px mr-15-px">
                <div class="job-actions" style="display: flex; gap: 8px; align-items: center;">
                  <button id="save-btn" class="action-btn" title="Save">
                    <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 10.5V12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2H13.5" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <circle cx="19" cy="5" r="3" stroke="#1C274C" stroke-width="1.5"/>
                    <path d="M7 14H16" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M7 17.5H13" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg> Notify of hire
                  </button>
                {% if app.request.get('status') not in ['saved', 'interview', 'negotiating', 'accepted', 'completed'] %}
                    <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Request Response
                  </button>
                {% endif %}
                {% if app.request.get('status') not in ['saved', 'applied', 'negotiating', 'accepted', 'completed'] %}
                  <button id="email-btn" class="action-btn" title="Email">
                    <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="style=stroke">
                    <g id="email">
                    <path id="vector (Stroke)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88534 5.2371C3.20538 5.86848 2.75 6.89295 2.75 8.5V15.5C2.75 17.107 3.20538 18.1315 3.88534 18.7629C4.57535 19.4036 5.61497 19.75 7 19.75H17C18.385 19.75 19.4246 19.4036 20.1147 18.7629C20.7946 18.1315 21.25 17.107 21.25 15.5V8.5C21.25 6.89295 20.7946 5.86848 20.1147 5.2371C19.4246 4.59637 18.385 4.25 17 4.25H7C5.61497 4.25 4.57535 4.59637 3.88534 5.2371ZM2.86466 4.1379C3.92465 3.15363 5.38503 2.75 7 2.75H17C18.615 2.75 20.0754 3.15363 21.1353 4.1379C22.2054 5.13152 22.75 6.60705 22.75 8.5V15.5C22.75 17.393 22.2054 18.8685 21.1353 19.8621C20.0754 20.8464 18.615 21.25 17 21.25H7C5.38503 21.25 3.92465 20.8464 2.86466 19.8621C1.79462 18.8685 1.25 17.393 1.25 15.5V8.5C1.25 6.60705 1.79462 5.13152 2.86466 4.1379Z" fill="currentColor"></path>
                    <path id="vector (Stroke)_2" fill-rule="evenodd" clip-rule="evenodd" d="M19.3633 7.31026C19.6166 7.63802 19.5562 8.10904 19.2285 8.3623L13.6814 12.6486C12.691 13.4138 11.3089 13.4138 10.3185 12.6486L4.77144 8.3623C4.44367 8.10904 4.38328 7.63802 4.63655 7.31026C4.88982 6.98249 5.36083 6.9221 5.6886 7.17537L11.2356 11.4616C11.6858 11.8095 12.3141 11.8095 12.7642 11.4616L18.3113 7.17537C18.6391 6.9221 19.1101 6.98249 19.3633 7.31026Z" fill="currentcolor"></path>
                    </g>
                    </g>
                    <use xlink:href="#icon-email"/>
                    </svg> Say thank you
                  </button>
                {% endif %}
                {% if app.request.get('status') not in ['saved', 'applied', 'interview', 'accepted', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Follow Up Note
                  </button>
                {% endif %}
                {% if app.request.get('status') not in ['saved', 'applied', 'interview', 'negotiating', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Ask for Details
                  </button>
                {% endif %}
                {% if app.request.get('status') not in ['saved', 'applied', 'interview', 'negotiating', 'accepted'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Write Review
                  </button>
                {% endif %}
                  <button id="email-btn" class="action-btn" title="Email">
                    <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g id="style=stroke">
                    <g id="email">
                    <path id="vector (Stroke)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88534 5.2371C3.20538 5.86848 2.75 6.89295 2.75 8.5V15.5C2.75 17.107 3.20538 18.1315 3.88534 18.7629C4.57535 19.4036 5.61497 19.75 7 19.75H17C18.385 19.75 19.4246 19.4036 20.1147 18.7629C20.7946 18.1315 21.25 17.107 21.25 15.5V8.5C21.25 6.89295 20.7946 5.86848 20.1147 5.2371C19.4246 4.59637 18.385 4.25 17 4.25H7C5.61497 4.25 4.57535 4.59637 3.88534 5.2371ZM2.86466 4.1379C3.92465 3.15363 5.38503 2.75 7 2.75H17C18.615 2.75 20.0754 3.15363 21.1353 4.1379C22.2054 5.13152 22.75 6.60705 22.75 8.5V15.5C22.75 17.393 22.2054 18.8685 21.1353 19.8621C20.0754 20.8464 18.615 21.25 17 21.25H7C5.38503 21.25 3.92465 20.8464 2.86466 19.8621C1.79462 18.8685 1.25 17.393 1.25 15.5V8.5C1.25 6.60705 1.79462 5.13152 2.86466 4.1379Z" fill="currentColor"></path>
                    <path id="vector (Stroke)_2" fill-rule="evenodd" clip-rule="evenodd" d="M19.3633 7.31026C19.6166 7.63802 19.5562 8.10904 19.2285 8.3623L13.6814 12.6486C12.691 13.4138 11.3089 13.4138 10.3185 12.6486L4.77144 8.3623C4.44367 8.10904 4.38328 7.63802 4.63655 7.31026C4.88982 6.98249 5.36083 6.9221 5.6886 7.17537L11.2356 11.4616C11.6858 11.8095 12.3141 11.8095 12.7642 11.4616L18.3113 7.17537C18.6391 6.9221 19.1101 6.98249 19.3633 7.31026Z" fill="currentcolor"></path>
                    </g>
                    </g>
                    <use xlink:href="#icon-email"/>
                    </svg> Email
                  </button>
                  <button id="delete-btn" class="action-btn" title="Delete">
                    <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M20.5 6H3.49988" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M9.5 11L10 16" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M14.5 11L14 16" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <use xlink:href="#icon-delete"/>
                    </svg> Delete
                  </button>
                  <button id="archive-btn" class="action-btn" title="Archive">
                    <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 21L12 12M12 12L15 15.3333M12 12L9 15.3333" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M20.5 7V13C20.5 16.7712 20.5 18.6569 19.3284 19.8284C18.1569 21 16.2712 21 12.5 21H11.5C7.72876 21 5.84315 21 4.67157 19.8284C3.5 18.6569 3.5 16.7712 3.5 13V7" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
                    <path d="M2 5C2 4.05719 2 3.58579 2.29289 3.29289C2.58579 3 3.05719 3 4 3H20C20.9428 3 21.4142 3 21.7071 3.29289C22 3.58579 22 4.05719 22 5C22 5.94281 22 6.41421 21.7071 6.70711C21.4142 7 20.9428 7 20 7H4C3.05719 7 2.58579 7 2.29289 6.70711C2 6.41421 2 5.94281 2 5Z" stroke="currentcolor" stroke-width="1.5"/>
                    <use xlink:href="#icon-archive"/>
                    </svg> Archive
                  </button>
                </div>
                <div class="col-dropdowns d-flex gap-2">
                  <!-- Columns Dropdown -->
                  <div class="columns-dropdown position-relative">
                    <button type="button" class="columns-dropdown-btn dropdown-cstm"><span>Columns</span></button>
                    <div class="dropdown-panel columns-panel custom-dropdown hidden">
                      <label><input type="checkbox" value="salary"> Salary</label>
                      <label><input type="checkbox" value="location"> Location</label>
                      <label><input type="checkbox" value="date-posted"> Date Posted</label>
                      <label><input type="checkbox" value="deadline"> Deadline</label>
                      <label><input type="checkbox" value="date-applied"> Date Applied</label>
                      <label><input type="checkbox" value="excitement"> Rank</label>
                    </div>
                  </div>

                  <!-- Menu Dropdown -->
                  <div class="menu-dropdown position-relative">
                    <button type="button" class="menu-dropdown-btn dropdown-cstm"><span>Menu</span></button>
                    <div class="dropdown-panel menu-panel custom-dropdown hidden">
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="Warning / Info">
                        <path id="Vector" d="M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z" stroke="#121C0C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
                        </svg> Quick Tour</div>
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.5" d="M20.5 7V13C20.5 16.7712 20.5 18.6569 19.3284 19.8284C18.1569 21 16.2712 21 12.5 21H11.5C7.72876 21 5.84315 21 4.67157 19.8284C3.5 18.6569 3.5 16.7712 3.5 13V7" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M2 5C2 4.05719 2 3.58579 2.29289 3.29289C2.58579 3 3.05719 3 4 3H20C20.9428 3 21.4142 3 21.7071 3.29289C22 3.58579 22 4.05719 22 5C22 5.94281 22 6.41421 21.7071 6.70711C21.4142 7 20.9428 7 20 7H4C3.05719 7 2.58579 7 2.29289 6.70711C2 6.41421 2 5.94281 2 5Z" stroke="#121C0C" stroke-width="1.5"/>
                        <path d="M12 7L12 16M12 16L15 12.6667M12 16L9 12.6667" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg> Archived Jobs</div>
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.44 8.8999C20.04 9.2099 21.51 11.0599 21.51 15.1099V15.2399C21.51 19.7099 19.72 21.4999 15.25 21.4999H8.73998C4.26998 21.4999 2.47998 19.7099 2.47998 15.2399V15.1099C2.47998 11.0899 3.92998 9.2399 7.46998 8.9099" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15.0001V3.62012" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M15.35 5.85L12 2.5L8.65002 5.85" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg> Export Report</div>
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.44 8.8999C20.04 9.2099 21.51 11.0599 21.51 15.1099V15.2399C21.51 19.7099 19.72 21.4999 15.25 21.4999H8.73998C4.26998 21.4999 2.47998 19.7099 2.47998 15.2399V15.1099C2.47998 11.0899 3.92998 9.2399 7.46998 8.9099" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15.0001V3.62012" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M15.35 5.85L12 2.5L8.65002 5.85" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg> Download Data</div>
                    </div>
                  </div>
                </div>
            </div>

            {% if applications|length > 0 %}
            <div class="job-list-container bg-light p-3 rounded-3">
            <div class="d-flex align-items-center job-lists">
                <div class="d-flex align-items-center flex-grow-1">
                    <div class="job-header d-flex align-items-center gap-2 fw-semibold py-2 flex-grow-1">
                        <div class="col-check" style="width: 25px;">
                            <input type="checkbox" id="select-all-checkbox" class="job-check" title="Select All" />
                        </div>
                        <div class="col-job flex-grow-2">Job</div>
                        {#<div class="col-start col-center flex-grow-1">Employer</div>#}
                        <div class="col-start col-center flex-grow-1">Location</div>
                        {#<div class="col-expiry col-center flex-grow-1">Schedule</div>#}
                        <div class="col-start col-center flex-grow-1">Salary</div>
                        {% if app.request.get('status') not in ['interview', 'hired', 'completed'] %}
                        <div class="col-start col-center flex-grow-1">Applied on</div>
                        <div class="col-start col-center col-rank flex-grow-1">Rank</div>
                        {% endif %}
                        {% if app.request.get('status') not in ['applied', 'hired', 'completed'] %}
                        <div class="col-start col-center flex-grow-1">To Do</div>
                        <div class="col-start col-center flex-grow-1">Interview date</div>
                        {% endif %}            
                        <div class="col-start col-center flex-grow-1">Status</div>
                    </div>
                </div>
            </div>

            {% for application in applications %}
            {% set job = application.job %}
            <div class="d-flex align-items-center job-lists">
            <div class="job-row d-flex align-items-center flex-grow-1 gap-2">
                <div class="col-check" style="width: 25px;">
                    <input type="checkbox" class="job-check job-checkbox" data-job-id="{{ job.id }}" />
                </div>
                <div class="col-job d-flex align-items-center gap-2 flex-grow-2">
                    <img src="{{ job.companyLogo|default(asset('assets/icons/job.png')) }}"
                         alt="Logo"
                         style="width: 40px; height: 40px; border-radius: 8px;" />
                    <div class="flex-grow-2">
                        <a class="job-title truncate-text d-block fw-semibold text-decoration-none"
                           href="{{ path('app_provider_jobs_application_detail', {'id': application.id}) }}">
                            {{ job.title }}
                        </a>
                    </div>
                </div>
                <div class="col-start col-center flex-grow-1">{{ job.state }}</div>
                <div class="col-start col-center flex-grow-1">{{ job.payRateHourly }}</div>
                {% if application.status == 'applied' %}
                <div class="col-expiry col-center flex-grow-1">{{ application.createdAt|date('m/d/Y') }}</div>
                {% endif %}
                {% if application.status == 'interview' %}
                <div class="col-expiry col-center flex-grow-1">
                    <span class="badge badge-pill">
                    To Do Actions
                    </span>
                </div>
                <div class="col-expiry col-center flex-grow-1">06/14/2025</div>
                {% endif %}
                {% if app.request.get('status') not in ['interview', 'hired', 'completed'] %}
                <div class="col-start col-center col-rank flex-grow-1">1</div>
                {% endif %}
                <div class="col-start col-center flex-grow-1">
                    {{ application.status | replace({'_': ' '}) | title }}
                </div>
                {% if app.request.get('status') not in ['applied', 'rejected', 'hired', 'completed'] %}
                {#<div class="col-start col-center col-rank flex-grow-1">
                {% if application.contractSentAt is not null and application.contractSignedAt is null %}
                    <a class="mb-1" href="{{ asset('uploads/contracts/' ~ application.contractFileName) }}" title="View Contract" target="_blank">
                        <img src="{{ asset('assets/icons/download.png') }}" class="icon-image" alt="view contract" />
                    </a>
                    <a class="" href="#" data-toggle="modal" data-application_id="{{ application.id }}" title="Send Contract" data-target="#contractModal">
                        &nbsp; <img src="{{ asset('assets/icons/contract.png') }}" class="icon-image" alt="send contract" />
                    </a>
                {% endif %}

                {% if application.status == 'interview' %}
                    <a href="{{ path('app_provider_interview_calendar') }}" title="Calendar"><img src="{{ asset('assets/icons/calendar.png') }}" class="icon-image" /></a>
                {% endif %}
                </div>#}
                {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <p>Applications not found.</p>
        {% endif %}
        <div class="job-actions hidden-buttons ml-15-px" style="margin-bottom: 20px; display: flex; gap: 8px; align-items: center; visibility: hidden;">
          <button id="save-btn" class="action-btn" title="Save">
            <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 10.5V12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2H13.5" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="19" cy="5" r="3" stroke="#1C274C" stroke-width="1.5"/>
            <path d="M7 14H16" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M7 17.5H13" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </button>
        {% if app.request.get('status') not in ['saved', 'interview', 'negotiating', 'accepted', 'completed'] %}
            <button id="apply-btn" class="action-btn" disabled title="Apply">
            <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <g data-name="Layer 2">
            <g data-name="checkmark-circle">
            <rect width="24" height="24" opacity="0"/>
            <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
            <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
            </g>
            </g>
            <use xlink:href="#icon-apply"/>
            </svg>
          </button>
        {% endif %}
        {% if app.request.get('status') not in ['saved', 'applied', 'negotiating', 'accepted', 'completed'] %}
          <button id="email-btn" class="action-btn" title="Email">
            <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="style=stroke">
            <g id="email">
            <path id="vector (Stroke)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88534 5.2371C3.20538 5.86848 2.75 6.89295 2.75 8.5V15.5C2.75 17.107 3.20538 18.1315 3.88534 18.7629C4.57535 19.4036 5.61497 19.75 7 19.75H17C18.385 19.75 19.4246 19.4036 20.1147 18.7629C20.7946 18.1315 21.25 17.107 21.25 15.5V8.5C21.25 6.89295 20.7946 5.86848 20.1147 5.2371C19.4246 4.59637 18.385 4.25 17 4.25H7C5.61497 4.25 4.57535 4.59637 3.88534 5.2371ZM2.86466 4.1379C3.92465 3.15363 5.38503 2.75 7 2.75H17C18.615 2.75 20.0754 3.15363 21.1353 4.1379C22.2054 5.13152 22.75 6.60705 22.75 8.5V15.5C22.75 17.393 22.2054 18.8685 21.1353 19.8621C20.0754 20.8464 18.615 21.25 17 21.25H7C5.38503 21.25 3.92465 20.8464 2.86466 19.8621C1.79462 18.8685 1.25 17.393 1.25 15.5V8.5C1.25 6.60705 1.79462 5.13152 2.86466 4.1379Z" fill="currentColor"></path>
            <path id="vector (Stroke)_2" fill-rule="evenodd" clip-rule="evenodd" d="M19.3633 7.31026C19.6166 7.63802 19.5562 8.10904 19.2285 8.3623L13.6814 12.6486C12.691 13.4138 11.3089 13.4138 10.3185 12.6486L4.77144 8.3623C4.44367 8.10904 4.38328 7.63802 4.63655 7.31026C4.88982 6.98249 5.36083 6.9221 5.6886 7.17537L11.2356 11.4616C11.6858 11.8095 12.3141 11.8095 12.7642 11.4616L18.3113 7.17537C18.6391 6.9221 19.1101 6.98249 19.3633 7.31026Z" fill="currentcolor"></path>
            </g>
            </g>
            <use xlink:href="#icon-email"/>
            </svg>
          </button>
        {% endif %}
        {% if app.request.get('status') not in ['saved', 'applied', 'interview', 'accepted', 'completed'] %}
          <button id="apply-btn" class="action-btn" disabled title="Apply">
            <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <g data-name="Layer 2">
            <g data-name="checkmark-circle">
            <rect width="24" height="24" opacity="0"/>
            <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
            <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
            </g>
            </g>
            <use xlink:href="#icon-apply"/>
            </svg>
          </button>
        {% endif %}
        {% if app.request.get('status') not in ['saved', 'applied', 'interview', 'negotiating', 'completed'] %}
          <button id="apply-btn" class="action-btn" disabled title="Apply">
            <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <g data-name="Layer 2">
            <g data-name="checkmark-circle">
            <rect width="24" height="24" opacity="0"/>
            <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
            <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
            </g>
            </g>
            <use xlink:href="#icon-apply"/>
            </svg>
          </button>
        {% endif %}
        {% if app.request.get('status') not in ['saved', 'applied', 'interview', 'negotiating', 'accepted'] %}
          <button id="apply-btn" class="action-btn" disabled title="Apply">
            <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <g data-name="Layer 2">
            <g data-name="checkmark-circle">
            <rect width="24" height="24" opacity="0"/>
            <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
            <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
            </g>
            </g>
            <use xlink:href="#icon-apply"/>
            </svg>
          </button>
        {% endif %}
          <button id="email-btn" class="action-btn" title="Email">
            <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="style=stroke">
            <g id="email">
            <path id="vector (Stroke)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88534 5.2371C3.20538 5.86848 2.75 6.89295 2.75 8.5V15.5C2.75 17.107 3.20538 18.1315 3.88534 18.7629C4.57535 19.4036 5.61497 19.75 7 19.75H17C18.385 19.75 19.4246 19.4036 20.1147 18.7629C20.7946 18.1315 21.25 17.107 21.25 15.5V8.5C21.25 6.89295 20.7946 5.86848 20.1147 5.2371C19.4246 4.59637 18.385 4.25 17 4.25H7C5.61497 4.25 4.57535 4.59637 3.88534 5.2371ZM2.86466 4.1379C3.92465 3.15363 5.38503 2.75 7 2.75H17C18.615 2.75 20.0754 3.15363 21.1353 4.1379C22.2054 5.13152 22.75 6.60705 22.75 8.5V15.5C22.75 17.393 22.2054 18.8685 21.1353 19.8621C20.0754 20.8464 18.615 21.25 17 21.25H7C5.38503 21.25 3.92465 20.8464 2.86466 19.8621C1.79462 18.8685 1.25 17.393 1.25 15.5V8.5C1.25 6.60705 1.79462 5.13152 2.86466 4.1379Z" fill="currentColor"></path>
            <path id="vector (Stroke)_2" fill-rule="evenodd" clip-rule="evenodd" d="M19.3633 7.31026C19.6166 7.63802 19.5562 8.10904 19.2285 8.3623L13.6814 12.6486C12.691 13.4138 11.3089 13.4138 10.3185 12.6486L4.77144 8.3623C4.44367 8.10904 4.38328 7.63802 4.63655 7.31026C4.88982 6.98249 5.36083 6.9221 5.6886 7.17537L11.2356 11.4616C11.6858 11.8095 12.3141 11.8095 12.7642 11.4616L18.3113 7.17537C18.6391 6.9221 19.1101 6.98249 19.3633 7.31026Z" fill="currentcolor"></path>
            </g>
            </g>
            <use xlink:href="#icon-email"/>
            </svg>
          </button>
          <button id="delete-btn" class="action-btn" title="Delete">
            <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.17065 4C9.58249 2.83481 10.6937 2 11.9999 2C13.3062 2 14.4174 2.83481 14.8292 4" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M20.5 6H3.49988" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M18.3735 15.3991C18.1965 18.054 18.108 19.3815 17.243 20.1907C16.378 21 15.0476 21 12.3868 21H11.6134C8.9526 21 7.6222 21 6.75719 20.1907C5.89218 19.3815 5.80368 18.054 5.62669 15.3991L5.16675 8.5M18.8334 8.5L18.6334 11.5" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M9.5 11L10 16" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M14.5 11L14 16" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <use xlink:href="#icon-delete"/>
            </svg>
          </button>
          <button id="archive-btn" class="action-btn" title="Archive">
            <svg class="icon-image" width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21L12 12M12 12L15 15.3333M12 12L9 15.3333" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M20.5 7V13C20.5 16.7712 20.5 18.6569 19.3284 19.8284C18.1569 21 16.2712 21 12.5 21H11.5C7.72876 21 5.84315 21 4.67157 19.8284C3.5 18.6569 3.5 16.7712 3.5 13V7" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M2 5C2 4.05719 2 3.58579 2.29289 3.29289C2.58579 3 3.05719 3 4 3H20C20.9428 3 21.4142 3 21.7071 3.29289C22 3.58579 22 4.05719 22 5C22 5.94281 22 6.41421 21.7071 6.70711C21.4142 7 20.9428 7 20 7H4C3.05719 7 2.58579 7 2.29289 6.70711C2 6.41421 2 5.94281 2 5Z" stroke="currentcolor" stroke-width="1.5"/>
            <use xlink:href="#icon-archive"/>
            </svg>
          </button>
        </div>
    </div>
</div>

    <!-- Send Contract Modal -->
    <div class="modal fade" id="contractModal" tabindex="-1" role="dialog" aria-labelledby="contractModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contractModalLabel">Send Contract</h5>
                </div>
                <form method="post" action="" enctype="multipart/form-data">
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="file" name="contractFile" required />
                        </div>
                    </div>
                    <div class="modal-footer">
                        {#                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>#}
                        <button type="submit" class="btn btn-primary">Send</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer_scripts %}
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script>
        $(document).ready(function() {
            $('#contractModal').on('show.bs.modal', function(event) {
                var button = $(event.relatedTarget); // Button that triggered the modal
                var applicationId = button.data('application_id'); // Get application ID
                var form = $(this).find('form'); // Find the form inside the modal
                var actionUrl = "{{ path('app_provider_application_sendcontract', {'id': 'APPLICATION_ID'}) }}".replace('APPLICATION_ID', applicationId);
                form.attr('action', actionUrl); // Set the form action
            });
        });
    </script>
    <script>
  document.addEventListener('DOMContentLoaded', function () {
    const checkboxes = document.querySelectorAll('.job-checkbox');
    const applyBtn = document.getElementById('apply-btn');
    const saveBtn = document.getElementById('save-btn');
    const deleteBtn = document.getElementById('delete-btn');
    const actionsDivs = document.querySelectorAll('.hidden-buttons');
    const selectAllCheckbox = document.getElementById('select-all-checkbox');
    const columnsBtn = document.querySelector('.columns-dropdown-btn');
    const menuBtn = document.querySelector('.menu-dropdown-btn');
    const columnsPanel = document.querySelector('.columns-panel');
    const menuPanel = document.querySelector('.menu-panel');

    function toggleDropdown(panel, btn) {
        const isOpen = !panel.classList.contains('hidden');
        closeAllDropdowns();
        if (!isOpen) panel.classList.remove('hidden');
    }

    function closeAllDropdowns() {
        columnsPanel.classList.add('hidden');
        menuPanel.classList.add('hidden');
    }

    columnsBtn.addEventListener('click', e => {
        e.stopPropagation();
        toggleDropdown(columnsPanel, columnsBtn);
    });

    menuBtn.addEventListener('click', e => {
        e.stopPropagation();
        toggleDropdown(menuPanel, menuBtn);
    });

    document.addEventListener('click', e => {
        // Only close if click is outside both dropdowns and buttons
        if (
          !columnsPanel.contains(e.target) &&
          !columnsBtn.contains(e.target) &&
          !menuPanel.contains(e.target) &&
          !menuBtn.contains(e.target)
        ) {
          closeAllDropdowns();
        }
    });

    if (selectAllCheckbox) {
      selectAllCheckbox.addEventListener('change', function () {
        checkboxes.forEach(cb => {
          cb.checked = selectAllCheckbox.checked;
        });
        toggleActionsVisibility();
        updateActions();
      });

      // Sync master checkbox if user manually toggles individual ones
      checkboxes.forEach(cb => {
        cb.addEventListener('change', function () {
          const allChecked = Array.from(checkboxes).every(cb => cb.checked);
          selectAllCheckbox.checked = allChecked;
        });
      });
    }

    function toggleActionsVisibility() {
      const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
      actionsDivs.forEach(div => {
        div.style.visibility = anyChecked ? 'visible' : 'hidden';
      });
    }

    checkboxes.forEach(cb => {
      cb.addEventListener('change', toggleActionsVisibility);
    });

    // Initial check in case some boxes are pre-checked
    toggleActionsVisibility();

    function updateActions() {
      const checked = Array.from(checkboxes).filter(cb => cb.checked);
      applyBtn.disabled = checked.length !== 1;
    }

    checkboxes.forEach(cb => {
      cb.addEventListener('change', updateActions);
    });

    applyBtn.addEventListener('click', () => {
      const selected = Array.from(checkboxes).filter(cb => cb.checked);
      if (selected.length === 1) {
        const jobId = selected[0].dataset.jobId;
        // Trigger apply logic here
        console.log('Applying to job:', jobId);
      }
    });

    saveBtn.addEventListener('click', () => {
      const selectedIds = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.dataset.jobId);
      // Trigger batch save logic here
      console.log('Saving jobs:', selectedIds);
    });

    deleteBtn.addEventListener('click', () => {
      const selectedIds = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.dataset.jobId);
      // Trigger batch delete logic here
      console.log('Deleting jobs:', selectedIds);
    });
  });
</script>
{% endblock %}