{% extends 'provider/base.html.twig' %}
{% block title %}Dashboard{% endblock %}

{% block provider_body %}
<style>
/* COMPLETE RESET - Remove ALL conflicting styles and apply clean spacing to match image */

/* Reset app-wrapper - remove all custom.css overrides */
body.app .app-wrapper,
.app-wrapper {
    display: block !important;
    justify-content: unset !important;
    align-items: unset !important;
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

/* Shift app-wrapper to the left to eliminate gap */
@media (min-width: 1200px) {
    body.app .app-wrapper,
    .app-wrapper {
        margin-left: 250px !important;
        transform: translateX(-150px) !important;
        width: calc(100% - 250px + 150px) !important;
    }
}

/* Reset app-content - remove all custom.css overrides */
body.app .app-wrapper .app-content,
.app-wrapper .app-content,
.app-content {
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 20px !important;
    padding-bottom: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    position: relative !important;
    box-sizing: border-box !important;
}

/* Override custom.css width constraints at 1200px breakpoint */
@media (min-width: 1200px) {
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        width: 100% !important;
        max-width: 100% !important;
    }
}

/* Reset container-xl - apply clean spacing matching image */
body.app .app-wrapper .app-content .container-xl,
.app-wrapper .app-content .container-xl,
.app-content .container-xl,
body .app-content .container-xl,
.dashboard .container-xl,
div.container-xl,
[class*="container-xl"],
.container-xl {
    position: relative !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 30px !important;
    max-width: 100% !important;
    width: 100% !important;
    transform: none !important;
    box-sizing: border-box !important;
}

/* Remove left padding from application status tracker to match image */
.container-xl .application {
    padding-left: 0 !important;
    margin-left: 0 !important;
}

/* Adjust column widths to better fill space - match reference image */
.container-xl .row.g-2 > .col-12.col-lg-7 {
    flex: 0 0 58.333333% !important;
    max-width: 58.333333% !important;
}

.container-xl .row.g-2 > .col-12.col-lg-5 {
    flex: 0 0 41.666667% !important;
    max-width: 41.666667% !important;
}

/* Ensure rows fill the container width */
.container-xl .row {
    margin-left: 0 !important;
    margin-right: 0 !important;
    width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

/* Remove left padding from first column only - keep gaps between columns */
.container-xl .row > [class*="col-"]:first-child {
    padding-left: 0 !important;
    margin-left: 0 !important;
}

/* Adjust gap between columns */
.container-xl .row.g-2 {
    --bs-gutter-x: 0.5rem !important;
    --bs-gutter-y: 0.5rem !important;
}

/* Override ALL media queries from custom.css */
@media (min-width: 576px) {
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    body .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
    }
}

@media (min-width: 992px) {
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    body .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
    }
}

@media (min-width: 1200px) {
    body.app .app-wrapper {
        position: relative !important;
        margin-left: 250px !important;
        transform: translateX(-150px) !important;
        width: calc(100% - 250px + 150px) !important;
    }
    
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        position: relative !important;
        max-width: 100% !important;
        width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    body .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        position: relative !important;
        padding-left: 0 !important;
        padding-right: 30px !important;
        max-width: 100% !important;
        width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}

@media (min-width: 1600px) {
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        max-width: 100% !important;
        width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    body .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}
</style>
{#<style>
.application-sticky .is-card {
  position: relative;
  border-radius: 0;
  transition: background-color 0.3s ease;
  background-color: #f8f9fa;
  clip-path: polygon(
    20px 0%, 
    calc(100% - 40px) 0%, 
    100% 50%, 
    calc(100% - 40px) 100%, 
    20px 100%, 
    0% 50%
  );
  margin-left: -10px;
  z-index: 1;
}

/* First card: no left cutout */
.application-sticky .col:first-child .is-card {
  clip-path: polygon(
    0% 0%, 
    calc(100% - 40px) 0%, 
    100% 50%, 
    calc(100% - 40px) 100%, 
    0% 100%
  );
  margin-left: 0;
  z-index: 2;
}
</style>#}
<div class="container-xl">

    {% set statusColors = {
        'saved': 'saved',
        'applied': 'applied',
        'interview': 'interview',
        'negotiating': 'offered',
        'accepted' : 'hired',
        'completed': 'completed',
    } %}

    {% set allStatuses = ['saved', 'applied', 'interview', 'negotiating', 'accepted', 'completed'] %}

    <div class="application">
        <div class="row g-2">
            <div class="col">
                <a href="{{ path('app_provider_jobs_applications') }}">
                    <div class="card is-card mb-3 is-applied {% if app.request.get('status') and app.request.get('status') == '' %}active{% endif %}">
                        <div class="card-body">
                            <h6 class="card-title">All</h6>
                            <p class="card-text">{{ totalApplications|number_format }}</p>
                        </div>
                    </div>
                </a>
            </div>

            {% for status in allStatuses %}
                {% set count = 0 %}
                {% for item in statusCounts %}
                    {% if item.status == status %}
                        {% set count = item.count %}
                    {% endif %}
                {% endfor %}
                <div class="col">
                    <a href="{% if status == 'saved' %}{{ path('app_provider_jobs_saved') }}{% else %}{{ path('app_provider_jobs_applications', {'status': status}) }}{% endif %}">
                    <div class="card is-card mb-3 is-{{ statusColors[status] }} {% if app.request.get('status') == status %}active{% endif %}">
                        <div class="card-body">
                            <h6 class="card-title">{{ status | replace({'_': ' '}) | title }}</h6>
                            <p class="card-text">{{ count }}</p>
                            {#   {% if status == 'applied' %}
                                <img src="{{ asset('assets/icons/submit.png') }}" class="icon-image" alt="">
                            {% elseif status == 'in_review' %}
                                <img src="{{ asset('assets/icons/magnifying-glass.png') }}" class="icon-image" alt="">
                            {% elseif status == 'interview' %}
                                <img src="{{ asset('assets/icons/hired.png') }}" class="icon-image" alt="">
                            {% elseif status == 'offered' %}
                                <img src="{{ asset('assets/icons/invitation-letter.png') }}" class="icon-image" alt="">
                            {% elseif status == 'rejected' %}
                                <img src="{{ asset('assets/icons/no-internet.png') }}" class="icon-image" alt="">
                            {% elseif status == 'hired' %}
                                <img src="{{ asset('assets/icons/campus.png') }}" class="icon-image" alt="">
                            {% elseif status == 'completed' %}
                                <img src="{{ asset('assets/icons/flag.png') }}" class="icon-image" alt="">
                            {% endif %} #}
                        </div>
                    </div>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Row 1 -->
    <div class="row g-2 mt-4">
        <!-- Matched / Saved Jobs -->
        <div class="col-12 col-lg-7">
            <div class="job-section shadow-lg p-3">

                <!-- Top Tabs as Button Boxes -->
                <div class="d-flex justify-content-between align-items-center mb-10-px">
                    <div class="d-flex gap-2">
                        <a href="{{ path('app_provider_jobs_matching') }}" style="text-decoration:none;"><h6 class="app-card-title mb-0">Matched Jobs</h6></a>

                        {#<button class="job-tab-btn" id="tab-saved-jobs" type="button">
                            Saved Jobs
                        </button>#}
                    </div>

                    <!-- Eye Icon (View All) -->
                    <a id="view-all-link" href="{{ path('app_provider_jobs_matching') }}" class="link-plain">
                        <svg class="icon-image" width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.75 9.233C4.75 9.64721 5.08579 9.983 5.5 9.983C5.91421 9.983 6.25 9.64721 6.25 9.233H4.75ZM6.25 5.5C6.25 5.08579 5.91421 4.75 5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5H6.25ZM5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5C4.75 5.91421 5.08579 6.25 5.5 6.25V4.75ZM9.233 6.25C9.64721 6.25 9.983 5.91421 9.983 5.5C9.983 5.08579 9.64721 4.75 9.233 4.75V6.25ZM6.03033 4.96967C5.73744 4.67678 5.26256 4.67678 4.96967 4.96967C4.67678 5.26256 4.67678 5.73744 4.96967 6.03033L6.03033 4.96967ZM9.96967 11.0303C10.2626 11.3232 10.7374 11.3232 11.0303 11.0303C11.3232 10.7374 11.3232 10.2626 11.0303 9.96967L9.96967 11.0303ZM15.767 18.75C15.3528 18.75 15.017 19.0858 15.017 19.5C15.017 19.9142 15.3528 20.25 15.767 20.25V18.75ZM19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5C20.25 19.0858 19.9142 18.75 19.5 18.75V20.25ZM18.75 19.5C18.75 19.9142 19.0858 20.25 19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5H18.75ZM20.25 15.767C20.25 15.3528 19.9142 15.017 19.5 15.017C19.0858 15.017 18.75 15.3528 18.75 15.767H20.25ZM18.9697 20.0303C19.2626 20.3232 19.7374 20.3232 20.0303 20.0303C20.3232 19.7374 20.3232 19.2626 20.0303 18.9697L18.9697 20.0303ZM15.0303 13.9697C14.7374 13.6768 14.2626 13.6768 13.9697 13.9697C13.6768 14.2626 13.6768 14.7374 13.9697 15.0303L15.0303 13.9697ZM6.25 15.767C6.25 15.3528 5.91421 15.017 5.5 15.017C5.08579 15.017 4.75 15.3528 4.75 15.767H6.25ZM4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25C5.91421 20.25 6.25 19.9142 6.25 19.5H4.75ZM5.5 18.75C5.08579 18.75 4.75 19.0858 4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25V18.75ZM9.233 20.25C9.64721 20.25 9.983 19.9142 9.983 19.5C9.983 19.0858 9.64721 18.75 9.233 18.75V20.25ZM4.96967 18.9697C4.67678 19.2626 4.67678 19.7374 4.96967 20.0303C5.26256 20.3232 5.73744 20.3232 6.03033 20.0303L4.96967 18.9697ZM11.0303 15.0303C11.3232 14.7374 11.3232 14.2626 11.0303 13.9697C10.7374 13.6768 10.2626 13.6768 9.96967 13.9697L11.0303 15.0303ZM15.767 4.75C15.3528 4.75 15.017 5.08579 15.017 5.5C15.017 5.91421 15.3528 6.25 15.767 6.25V4.75ZM19.5 6.25C19.9142 6.25 20.25 5.91421 20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75V6.25ZM20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75C19.0858 4.75 18.75 5.08579 18.75 5.5H20.25ZM18.75 9.233C18.75 9.64721 19.0858 9.983 19.5 9.983C19.9142 9.983 20.25 9.64721 20.25 9.233H18.75ZM20.0303 6.03033C20.3232 5.73744 20.3232 5.26256 20.0303 4.96967C19.7374 4.67678 19.2626 4.67678 18.9697 4.96967L20.0303 6.03033ZM13.9697 9.96967C13.6768 10.2626 13.6768 10.7374 13.9697 11.0303C14.2626 11.3232 14.7374 11.3232 15.0303 11.0303L13.9697 9.96967ZM6.25 9.233V5.5H4.75V9.233H6.25ZM5.5 6.25H9.233V4.75H5.5V6.25ZM4.96967 6.03033L9.96967 11.0303L11.0303 9.96967L6.03033 4.96967L4.96967 6.03033ZM15.767 20.25H19.5V18.75H15.767V20.25ZM20.25 19.5V15.767H18.75V19.5H20.25ZM20.0303 18.9697L15.0303 13.9697L13.9697 15.0303L18.9697 20.0303L20.0303 18.9697ZM4.75 15.767V19.5H6.25V15.767H4.75ZM5.5 20.25H9.233V18.75H5.5V20.25ZM6.03033 20.0303L11.0303 15.0303L9.96967 13.9697L4.96967 18.9697L6.03033 20.0303ZM15.767 6.25H19.5V4.75H15.767V6.25ZM18.75 5.5V9.233H20.25V5.5H18.75ZM18.9697 4.96967L13.9697 9.96967L15.0303 11.0303L20.0303 6.03033L18.9697 4.96967Z" fill="currentColor"/>
                        </svg>
                    </a>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Matched Jobs -->
                    {% set matchedList = (jobs is defined and jobs ? jobs : (matchingJobs is defined ? matchingJobs : [])) %}
                    <div class="tab-pane fade show active" id="pane-matched-jobs">
                        {% if matchedList|length > 0 %}
                        <div class="job-list-container">
                            {% for job in matchedList|slice(0,6) %}
                            {% set logo = job.companyLogo|default(job.employerLogo|default(job.employer.logo|default(asset('assets/icons/job.png')))) %}
                            {% set salary = job.salary|default(job.salaryText|default(null)) %}
                            {% set percent = job.matchingPercent|default(job.matchPercent|default(job.score|default(job.matchScore|default(null)))) %}
                            {% set r = 18 %}
                            {% set c = (2 * 3.1416 * r) %}
                            {% set p = percent is not null ? percent : 0 %}
                            {% set offset = c - (c * (p / 100)) %}
                            {% set hasExpiry = job.expirationDate is defined and job.expirationDate %}
                            {% set daysLeft = hasExpiry
                                ? (date(job.expirationDate) > date('now') ? date(job.expirationDate).diff(date('now')).days : 0)
                                : null
                            %}

                            <div class="job-card">
                                <div class="d-flex align-items-center gap-2 flex-grow-1">
                                    <div class="job-logo-box">
                                        <img src="{{ logo }}" class="job-logo-img" alt="" />
                                    </div>
                                    <div class="flex-grow-1" style="min-width: 0; overflow: hidden;">
                                        <a class="job-title d-block fw-semibold text-decoration-none"
                                        href="{{ path('app_provider_jobs_detail', {'id': job.id}) }}"
                                        style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                            {{ job.title }}
                                        </a>
                                        <div class="job-meta small" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                            {{ job.state }}, {{ job.city }} | {{ job.schedule }}{% if salary %} | {{ salary }}{% endif %}
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center gap-2 flex-shrink-0 text-end">
                                        <div class="progress-circle">
                                            <svg viewBox="0 0 44 44" width="36" height="36" aria-hidden="true">
                                                <circle cx="22" cy="22" r="{{ r }}" class="pc-bg"
                                                        stroke-width="4" fill="none"></circle>
                                                <circle cx="22" cy="22" r="{{ r }}" class="pc-fg"
                                                        stroke-width="4" fill="none"
                                                        stroke-dasharray="{{ c }}, {{ c }}"
                                                        stroke-dashoffset="{{ offset }}"></circle>
                                            </svg>
                                            <span class="pc-label">+{{ p }}%</span>
                                        </div>

                                        <div class="apply-within text-nowrap">
                                            <div class="apply-text small">Apply by</div>
                                            <div class="fw-semibold">
                                            {% if hasExpiry %}
                                                {% if date(job.expirationDate) > date('now') %}
                                                    {{ daysLeft }} days
                                                {% else %}
                                                    Expired
                                                {% endif %}
                                            {% else %}
                                                —
                                            {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <p class="mb-0">Matching jobs not found.</p>
                        {% endif %}
                    </div>

                    <!-- Saved Jobs -->
                    {#<div class="tab-pane fade" id="pane-saved-jobs">
                        {% if bookmarks|length > 0 %}
                        <div class="job-list-container">
                            {% for bookmark in bookmarks|slice(0,6) %}
                            {% set job = bookmark.job %}
                            {% set logo = job.companyLogo|default(job.employerLogo|default(job.employer.logo|default(asset('assets/icons/job.png')))) %}
                            {% set salary = job.salary|default(job.salaryText|default(null)) %}

                            <div class="job-card">
                                <div class="d-flex align-items-center gap-3">
                                    <div class="job-logo-box">
                                        <img src="{{ logo }}" class="job-logo-img" alt="" />
                                    </div>
                                    <div class="flex-grow-1">
                                        <a class="job-title d-block fw-semibold text-decoration-none"
                                        href="{{ path('app_provider_jobs_detail', {'id': job.id}) }}"
                                        {% if job.title|length > 60 %}title="{{ job.title }}"{% endif %}>
                                        {{ job.title|length > 60 ? job.title|slice(0, 60) ~ '…' : job.title }}
                                        </a>
                                        <div class="job-meta small">
                                            {{ job.state }}, {{ job.city }} | {{ job.schedule }}{% if salary %} | {{ salary }}{% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <p class="mb-0">You haven't saved any jobs yet.</p>
                        {% endif %}
                    </div>#}
                </div>
            </div>
        </div>

        <!-- Messages -->
        <div class="col-12 col-lg-5">
    <div class="job-section shadow-lg p-3 rounded-3 h-100">

        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <a href="{{ path('app_provider_messages') }}" style="text-decoration:none;"><h6 class="app-card-title mb-0">Messages</h6></a>
            <a id="view-messages-link" href="{{ path('app_provider_messages') }}" class="link-plain">
                <svg class="icon-image" width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4.75 9.233C4.75 9.64721 5.08579 9.983 5.5 9.983C5.91421 9.983 6.25 9.64721 6.25 9.233H4.75ZM6.25 5.5C6.25 5.08579 5.91421 4.75 5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5H6.25ZM5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5C4.75 5.91421 5.08579 6.25 5.5 6.25V4.75ZM9.233 6.25C9.64721 6.25 9.983 5.91421 9.983 5.5C9.983 5.08579 9.64721 4.75 9.233 4.75V6.25ZM6.03033 4.96967C5.73744 4.67678 5.26256 4.67678 4.96967 4.96967C4.67678 5.26256 4.67678 5.73744 4.96967 6.03033L6.03033 4.96967ZM9.96967 11.0303C10.2626 11.3232 10.7374 11.3232 11.0303 11.0303C11.3232 10.7374 11.3232 10.2626 11.0303 9.96967L9.96967 11.0303ZM15.767 18.75C15.3528 18.75 15.017 19.0858 15.017 19.5C15.017 19.9142 15.3528 20.25 15.767 20.25V18.75ZM19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5C20.25 19.0858 19.9142 18.75 19.5 18.75V20.25ZM18.75 19.5C18.75 19.9142 19.0858 20.25 19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5H18.75ZM20.25 15.767C20.25 15.3528 19.9142 15.017 19.5 15.017C19.0858 15.017 18.75 15.3528 18.75 15.767H20.25ZM18.9697 20.0303C19.2626 20.3232 19.7374 20.3232 20.0303 20.0303C20.3232 19.7374 20.3232 19.2626 20.0303 18.9697L18.9697 20.0303ZM15.0303 13.9697C14.7374 13.6768 14.2626 13.6768 13.9697 13.9697C13.6768 14.2626 13.6768 14.7374 13.9697 15.0303L15.0303 13.9697ZM6.25 15.767C6.25 15.3528 5.91421 15.017 5.5 15.017C5.08579 15.017 4.75 15.3528 4.75 15.767H6.25ZM4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25C5.91421 20.25 6.25 19.9142 6.25 19.5H4.75ZM5.5 18.75C5.08579 18.75 4.75 19.0858 4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25V18.75ZM9.233 20.25C9.64721 20.25 9.983 19.9142 9.983 19.5C9.983 19.0858 9.64721 18.75 9.233 18.75V20.25ZM4.96967 18.9697C4.67678 19.2626 4.67678 19.7374 4.96967 20.0303C5.26256 20.3232 5.73744 20.3232 6.03033 20.0303L4.96967 18.9697ZM11.0303 15.0303C11.3232 14.7374 11.3232 14.2626 11.0303 13.9697C10.7374 13.6768 10.2626 13.6768 9.96967 13.9697L11.0303 15.0303ZM15.767 4.75C15.3528 4.75 15.017 5.08579 15.017 5.5C15.017 5.91421 15.3528 6.25 15.767 6.25V4.75ZM19.5 6.25C19.9142 6.25 20.25 5.91421 20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75V6.25ZM20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75C19.0858 4.75 18.75 5.08579 18.75 5.5H20.25ZM18.75 9.233C18.75 9.64721 19.0858 9.983 19.5 9.983C19.9142 9.983 20.25 9.64721 20.25 9.233H18.75ZM20.0303 6.03033C20.3232 5.73744 20.3232 5.26256 20.0303 4.96967C19.7374 4.67678 19.2626 4.67678 18.9697 4.96967L20.0303 6.03033ZM13.9697 9.96967C13.6768 10.2626 13.6768 10.7374 13.9697 11.0303C14.2626 11.3232 14.7374 11.3232 15.0303 11.0303L13.9697 9.96967ZM6.25 9.233V5.5H4.75V9.233H6.25ZM5.5 6.25H9.233V4.75H5.5V6.25ZM4.96967 6.03033L9.96967 11.0303L11.0303 9.96967L6.03033 4.96967L4.96967 6.03033ZM15.767 20.25H19.5V18.75H15.767V20.25ZM20.25 19.5V15.767H18.75V19.5H20.25ZM20.0303 18.9697L15.0303 13.9697L13.9697 15.0303L18.9697 20.0303L20.0303 18.9697ZM4.75 15.767V19.5H6.25V15.767H4.75ZM5.5 20.25H9.233V18.75H5.5V20.25ZM6.03033 20.0303L11.0303 15.0303L9.96967 13.9697L4.96967 18.9697L6.03033 20.0303ZM15.767 6.25H19.5V4.75H15.767V6.25ZM18.75 5.5V9.233H20.25V5.5H18.75ZM18.9697 4.96967L13.9697 9.96967L15.0303 11.0303L20.0303 6.03033L18.9697 4.96967Z" fill="currentColor"/>
                </svg>
            </a>
        </div>

        <!-- Messages List -->
        {% if messages|length > 0 %}
        <div class="job-list-container">
            {% for message in messages|slice(0,6) %}
            {% set avatar = message.sender.avatar|default(message.employerAvatar|default(asset('assets/img/user-image.png'))) %}
            {% set sender = message.senderName|default(message.employer|default('')) %}
            {% set subject = message.subject|default(message.text|striptags) %}
            {% set subj = subject|length > 80 ? subject|slice(0,80) ~ '…' : subject %}
            {% set isNew = not (message.isRead|default(false) or message.viewed|default(false) or message.seen|default(false)) %}

            <div class="job-card d-flex justify-content-between align-items-start">
                <div class="d-flex align-items-start gap-2">
                    <img src="{{ avatar }}" class="job-logo-img rounded-circle" alt="" />
                    <div style="min-width: 0; overflow: hidden; flex-grow: 1;">
                        <div class="message-title fw-semibold" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ sender }}</div>
                        <a class="text-decoration-none d-block message-title"
                           href="{{ path('app_provider_message_show', {'id': message.id}) }}"
                           style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: block;">
                            {{ subj|raw }}
                        </a>
                    </div>
                </div>
                <div class="d-flex flex-column align-items-end gap-1 flex-shrink-0">
                    {% if isNew %}
                        <span class="badge message-badge fw-semibold" style="font-size: 10px; padding: 2px 6px;">New</span>
                    {% endif %}
                    <div class="small" style="font-size: 10px; white-space: nowrap;">{{ message.createdAt|ago }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <p class="mb-0">Messages not found.</p>
        {% endif %}
    </div>
</div>
    </div>

    <!-- Row 2: 3 Equal Cards -->
    <div class="row g-3 mt-4">
        <!-- To Do List -->
        <div class="col-12 col-lg-4">
            <div class="todo-card shadow-lg rounded-3 p-3 h-100 d-flex flex-column">
                <!-- Header -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="mb-0">To Do List</h6>
                    <a href="#" class="link-plain">
                        <svg class="icon-image" width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.75 9.233C4.75 9.64721 5.08579 9.983 5.5 9.983C5.91421 9.983 6.25 9.64721 6.25 9.233H4.75ZM6.25 5.5C6.25 5.08579 5.91421 4.75 5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5H6.25ZM5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5C4.75 5.91421 5.08579 6.25 5.5 6.25V4.75ZM9.233 6.25C9.64721 6.25 9.983 5.91421 9.983 5.5C9.983 5.08579 9.64721 4.75 9.233 4.75V6.25ZM6.03033 4.96967C5.73744 4.67678 5.26256 4.67678 4.96967 4.96967C4.67678 5.26256 4.67678 5.73744 4.96967 6.03033L6.03033 4.96967ZM9.96967 11.0303C10.2626 11.3232 10.7374 11.3232 11.0303 11.0303C11.3232 10.7374 11.3232 10.2626 11.0303 9.96967L9.96967 11.0303ZM15.767 18.75C15.3528 18.75 15.017 19.0858 15.017 19.5C15.017 19.9142 15.3528 20.25 15.767 20.25V18.75ZM19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5C20.25 19.0858 19.9142 18.75 19.5 18.75V20.25ZM18.75 19.5C18.75 19.9142 19.0858 20.25 19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5H18.75ZM20.25 15.767C20.25 15.3528 19.9142 15.017 19.5 15.017C19.0858 15.017 18.75 15.3528 18.75 15.767H20.25ZM18.9697 20.0303C19.2626 20.3232 19.7374 20.3232 20.0303 20.0303C20.3232 19.7374 20.3232 19.2626 20.0303 18.9697L18.9697 20.0303ZM15.0303 13.9697C14.7374 13.6768 14.2626 13.6768 13.9697 13.9697C13.6768 14.2626 13.6768 14.7374 13.9697 15.0303L15.0303 13.9697ZM6.25 15.767C6.25 15.3528 5.91421 15.017 5.5 15.017C5.08579 15.017 4.75 15.3528 4.75 15.767H6.25ZM4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25C5.91421 20.25 6.25 19.9142 6.25 19.5H4.75ZM5.5 18.75C5.08579 18.75 4.75 19.0858 4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25V18.75ZM9.233 20.25C9.64721 20.25 9.983 19.9142 9.983 19.5C9.983 19.0858 9.64721 18.75 9.233 18.75V20.25ZM4.96967 18.9697C4.67678 19.2626 4.67678 19.7374 4.96967 20.0303C5.26256 20.3232 5.73744 20.3232 6.03033 20.0303L4.96967 18.9697ZM11.0303 15.0303C11.3232 14.7374 11.3232 14.2626 11.0303 13.9697C10.7374 13.6768 10.2626 13.6768 9.96967 13.9697L11.0303 15.0303ZM15.767 4.75C15.3528 4.75 15.017 5.08579 15.017 5.5C15.017 5.91421 15.3528 6.25 15.767 6.25V4.75ZM19.5 6.25C19.9142 6.25 20.25 5.91421 20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75V6.25ZM20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75C19.0858 4.75 18.75 5.08579 18.75 5.5H20.25ZM18.75 9.233C18.75 9.64721 19.0858 9.983 19.5 9.983C19.9142 9.983 20.25 9.64721 20.25 9.233H18.75ZM20.0303 6.03033C20.3232 5.73744 20.3232 5.26256 20.0303 4.96967C19.7374 4.67678 19.2626 4.67678 18.9697 4.96967L20.0303 6.03033ZM13.9697 9.96967C13.6768 10.2626 13.6768 10.7374 13.9697 11.0303C14.2626 11.3232 14.7374 11.3232 15.0303 11.0303L13.9697 9.96967ZM6.25 9.233V5.5H4.75V9.233H6.25ZM5.5 6.25H9.233V4.75H5.5V6.25ZM4.96967 6.03033L9.96967 11.0303L11.0303 9.96967L6.03033 4.96967L4.96967 6.03033ZM15.767 20.25H19.5V18.75H15.767V20.25ZM20.25 19.5V15.767H18.75V19.5H20.25ZM20.0303 18.9697L15.0303 13.9697L13.9697 15.0303L18.9697 20.0303L20.0303 18.9697ZM4.75 15.767V19.5H6.25V15.767H4.75ZM5.5 20.25H9.233V18.75H5.5V20.25ZM6.03033 20.0303L11.0303 15.0303L9.96967 13.9697L4.96967 18.9697L6.03033 20.0303ZM15.767 6.25H19.5V4.75H15.767V6.25ZM18.75 5.5V9.233H20.25V5.5H18.75ZM18.9697 4.96967L13.9697 9.96967L15.0303 11.0303L20.0303 6.03033L18.9697 4.96967Z" fill="currentColor"/>
                        </svg>
                    </a>
                </div>

                <!-- Scrollable list -->
                <div class="todo-list flex-grow-1">
                    <ul class="list-unstyled m-0 p-0">
                        {% for i in 1..5 %}
                        <li class="todo-item d-flex align-items-start gap-3">
                            <div class="todo-icon text-white d-flex align-items-center justify-content-center">
                                <svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.25 8.5C12.8358 8.5 12.5 8.83579 12.5 9.25C12.5 9.66421 12.8358 10 13.25 10H16.75C17.1642 10 17.5 9.66421 17.5 9.25C17.5 8.83579 17.1642 8.5 16.75 8.5H13.25Z" fill="#121C0C"/>
                                <path d="M12.5001 14.75C12.5001 14.3358 12.8358 14 13.2501 14H16.7499C17.1642 14 17.4999 14.3358 17.4999 14.75C17.4999 15.1642 17.1642 15.5 16.7499 15.5H13.2501C12.8358 15.5 12.5001 15.1642 12.5001 14.75Z" fill="#121C0C"/>
                                <path d="M10.7803 7.71967C11.0732 8.01256 11.0732 8.48744 10.7803 8.78033L8.78033 10.7803C8.48744 11.0732 8.01256 11.0732 7.71967 10.7803L6.71967 9.78033C6.42678 9.48744 6.42678 9.01256 6.71967 8.71967C7.01256 8.42678 7.48744 8.42678 7.78033 8.71967L8.25 9.18934L9.71967 7.71967C10.0126 7.42678 10.4874 7.42678 10.7803 7.71967Z" fill="#121C0C"/>
                                <path d="M10.7803 14.2803C11.0732 13.9874 11.0732 13.5126 10.7803 13.2197C10.4874 12.9268 10.0126 12.9268 9.71967 13.2197L8.25 14.6893L7.78033 14.2197C7.48744 13.9268 7.01256 13.9268 6.71967 14.2197C6.42678 14.5126 6.42678 14.9874 6.71967 15.2803L7.71967 16.2803C8.01256 16.5732 8.48744 16.5732 8.78033 16.2803L10.7803 14.2803Z" fill="#121C0C"/>
                                <path d="M5.25 3C4.00736 3 3 4.00736 3 5.25V18.75C3 19.9926 4.00736 21 5.25 21H18.75C19.9926 21 21 19.9926 21 18.75V5.25C21 4.00736 19.9926 3 18.75 3H5.25ZM4.5 5.25C4.5 4.83579 4.83579 4.5 5.25 4.5H18.75C19.1642 4.5 19.5 4.83579 19.5 5.25V18.75C19.5 19.1642 19.1642 19.5 18.75 19.5H5.25C4.83579 19.5 4.5 19.1642 4.5 18.75V5.25Z" fill="#121C0C"/>
                                </svg>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <div class="schedule-left">
                                        <div class="fw-semibold">Task Title {{ i }}</div>
                                        <div class="small">Helpful short description for the task.</div>
                                    </div>
                                    <div class="schedule-right">
                                        <div class="small" style="font-size:12px;">Sep {{ 9+i }}, 2025</div>
                                        <div class="small" style="font-size:12px;">10:00 AM</div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>

        <!-- Profile Analytics -->
        <div class="col-12 col-lg-4">
            <div class="analytics-card shadow-lg rounded-3 p-3 h-100 d-flex flex-column">
                <div class="d-flex justify-content-between align-items-center w-100 mb-3 profile-analytics-title">
                    <h6 class="mb-0">Profile Analytics</h6>
                    <a href="{{ path('app_provider_analytics') }}" class="link-plain" title="View Full Analytics">
                        <svg class="icon-image" width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.75 9.233C4.75 9.64721 5.08579 9.983 5.5 9.983C5.91421 9.983 6.25 9.64721 6.25 9.233H4.75ZM6.25 5.5C6.25 5.08579 5.91421 4.75 5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5H6.25ZM5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5C4.75 5.91421 5.08579 6.25 5.5 6.25V4.75ZM9.233 6.25C9.64721 6.25 9.983 5.91421 9.983 5.5C9.983 5.08579 9.64721 4.75 9.233 4.75V6.25ZM6.03033 4.96967C5.73744 4.67678 5.26256 4.67678 4.96967 4.96967C4.67678 5.26256 4.67678 5.73744 4.96967 6.03033L6.03033 4.96967ZM9.96967 11.0303C10.2626 11.3232 10.7374 11.3232 11.0303 11.0303C11.3232 10.7374 11.3232 10.2626 11.0303 9.96967L9.96967 11.0303ZM15.767 18.75C15.3528 18.75 15.017 19.0858 15.017 19.5C15.017 19.9142 15.3528 20.25 15.767 20.25V18.75ZM19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5C20.25 19.0858 19.9142 18.75 19.5 18.75V20.25ZM18.75 19.5C18.75 19.9142 19.0858 20.25 19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5H18.75ZM20.25 15.767C20.25 15.3528 19.9142 15.017 19.5 15.017C19.0858 15.017 18.75 15.3528 18.75 15.767H20.25ZM18.9697 20.0303C19.2626 20.3232 19.7374 20.3232 20.0303 20.0303C20.3232 19.7374 20.3232 19.2626 20.0303 18.9697L18.9697 20.0303ZM15.0303 13.9697C14.7374 13.6768 14.2626 13.6768 13.9697 13.9697C13.6768 14.2626 13.6768 14.7374 13.9697 15.0303L15.0303 13.9697ZM6.25 15.767C6.25 15.3528 5.91421 15.017 5.5 15.017C5.08579 15.017 4.75 15.3528 4.75 15.767H6.25ZM4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25C5.91421 20.25 6.25 19.9142 6.25 19.5H4.75ZM5.5 18.75C5.08579 18.75 4.75 19.0858 4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25V18.75ZM9.233 20.25C9.64721 20.25 9.983 19.9142 9.983 19.5C9.983 19.0858 9.64721 18.75 9.233 18.75V20.25ZM4.96967 18.9697C4.67678 19.2626 4.67678 19.7374 4.96967 20.0303C5.26256 20.3232 5.73744 20.3232 6.03033 20.0303L4.96967 18.9697ZM11.0303 15.0303C11.3232 14.7374 11.3232 14.2626 11.0303 13.9697C10.7374 13.6768 10.2626 13.6768 9.96967 13.9697L11.0303 15.0303ZM15.767 4.75C15.3528 4.75 15.017 5.08579 15.017 5.5C15.017 5.91421 15.3528 6.25 15.767 6.25V4.75ZM19.5 6.25C19.9142 6.25 20.25 5.91421 20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75V6.25ZM20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75C19.0858 4.75 18.75 5.08579 18.75 5.5H20.25ZM18.75 9.233C18.75 9.64721 19.0858 9.983 19.5 9.983C19.9142 9.983 20.25 9.64721 20.25 9.233H18.75ZM20.0303 6.03033C20.3232 5.73744 20.3232 5.26256 20.0303 4.96967C19.7374 4.67678 19.2626 4.67678 18.9697 4.96967L20.0303 6.03033ZM13.9697 9.96967C13.6768 10.2626 13.6768 10.7374 13.9697 11.0303C14.2626 11.3232 14.7374 11.3232 15.0303 11.0303L13.9697 9.96967ZM6.25 9.233V5.5H4.75V9.233H6.25ZM5.5 6.25H9.233V4.75H5.5V6.25ZM4.96967 6.03033L9.96967 11.0303L11.0303 9.96967L6.03033 4.96967L4.96967 6.03033ZM15.767 20.25H19.5V18.75H15.767V20.25ZM20.25 19.5V15.767H18.75V19.5H20.25ZM20.0303 18.9697L15.0303 13.9697L13.9697 15.0303L18.9697 20.0303L20.0303 18.9697ZM4.75 15.767V19.5H6.25V15.767H4.75ZM5.5 20.25H9.233V18.75H5.5V20.25ZM6.03033 20.0303L11.0303 15.0303L9.96967 13.9697L4.96967 18.9697L6.03033 20.0303ZM15.767 6.25H19.5V4.75H15.767V6.25ZM18.75 5.5V9.233H20.25V5.5H18.75ZM18.9697 4.96967L13.9697 9.96967L15.0303 11.0303L20.0303 6.03033L18.9697 4.96967Z" fill="currentColor"/>
                        </svg>
                    </a>
                </div>

                <!-- Custom Dropdown -->
                <div class="dropdown-lite mb-3">
                    <button class="dl-toggle" type="button" id="analyticsDropdown">
                        <span class="dl-label">Application to Interview Ratio</span>
                        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 9L11.7874 14.7874V14.7874C11.9048 14.9048 12.0952 14.9048 12.2126 14.7874V14.7874L18 9" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <div class="dl-menu d-none">
                        <button class="dl-item" data-chart="ratio">Application to Interview Ratio</button>
                        <button class="dl-item" data-chart="skills">Top Skills in Demand</button>
                        <button class="dl-item" data-chart="resume">Resume Insight</button>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="analytics-chart flex-grow-1 d-flex justify-content-center align-items-center">
                    <!-- Initial Chart -->
                    <div class="chart-content" id="chart-ratio">
                        <svg viewBox="0 0 160 160" width="150" height="150">
                            <g transform="rotate(-90 80 80)">
                                <circle cx="80" cy="80" r="56" stroke="#10b981" stroke-width="14" fill="none"
                                        stroke-dasharray="120, 350"/>
                                <circle cx="80" cy="80" r="56" stroke="#22c55e" stroke-width="14" fill="none"
                                        stroke-dasharray="90, 350" stroke-dashoffset="130"/>
                                <circle cx="80" cy="80" r="56" stroke="#06b6d4" stroke-width="14" fill="none"
                                        stroke-dasharray="70, 350" stroke-dashoffset="220"/>
                            </g>
                        </svg>
                        <div class="donut-center">
                            <div class="donut-number">218</div>
                            <div class="donut-sub">impressions</div>
                        </div>
                    </div>

                    <!-- Top Skills Chart -->
                    <div class="chart-content d-none" id="chart-skills">
                        <div class="bar-chart w-100">
                            <div class="bar-item"><span>JavaScript</span><div class="bar-fill" style="width: 80%;"></div></div>
                            <div class="bar-item"><span>React</span><div class="bar-fill" style="width: 65%;"></div></div>
                            <div class="bar-item"><span>Node.js</span><div class="bar-fill" style="width: 50%;"></div></div>
                            <div class="bar-item"><span>Laravel</span><div class="bar-fill" style="width: 40%;"></div></div>
                        </div>
                    </div>

                    <!-- Resume Insight Chart -->
                    <div class="chart-content d-none" id="chart-resume">
                        <div class="resume-metric text-center">
                            <div class="resume-circle">
                                <span>85%</span>
                            </div>
                            <p class="mt-2 mb-0">Profile Completeness</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interview Schedule -->
        <div class="col-12 col-lg-4">
            <div class="interview-card shadow-lg rounded-3 p-3 h-100 d-flex flex-column">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h6 class="mb-0">Interview Schedule</h6>
                    <a href="#" class="link-plain">
                        <svg class="icon-image" width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.75 9.233C4.75 9.64721 5.08579 9.983 5.5 9.983C5.91421 9.983 6.25 9.64721 6.25 9.233H4.75ZM6.25 5.5C6.25 5.08579 5.91421 4.75 5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5H6.25ZM5.5 4.75C5.08579 4.75 4.75 5.08579 4.75 5.5C4.75 5.91421 5.08579 6.25 5.5 6.25V4.75ZM9.233 6.25C9.64721 6.25 9.983 5.91421 9.983 5.5C9.983 5.08579 9.64721 4.75 9.233 4.75V6.25ZM6.03033 4.96967C5.73744 4.67678 5.26256 4.67678 4.96967 4.96967C4.67678 5.26256 4.67678 5.73744 4.96967 6.03033L6.03033 4.96967ZM9.96967 11.0303C10.2626 11.3232 10.7374 11.3232 11.0303 11.0303C11.3232 10.7374 11.3232 10.2626 11.0303 9.96967L9.96967 11.0303ZM15.767 18.75C15.3528 18.75 15.017 19.0858 15.017 19.5C15.017 19.9142 15.3528 20.25 15.767 20.25V18.75ZM19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5C20.25 19.0858 19.9142 18.75 19.5 18.75V20.25ZM18.75 19.5C18.75 19.9142 19.0858 20.25 19.5 20.25C19.9142 20.25 20.25 19.9142 20.25 19.5H18.75ZM20.25 15.767C20.25 15.3528 19.9142 15.017 19.5 15.017C19.0858 15.017 18.75 15.3528 18.75 15.767H20.25ZM18.9697 20.0303C19.2626 20.3232 19.7374 20.3232 20.0303 20.0303C20.3232 19.7374 20.3232 19.2626 20.0303 18.9697L18.9697 20.0303ZM15.0303 13.9697C14.7374 13.6768 14.2626 13.6768 13.9697 13.9697C13.6768 14.2626 13.6768 14.7374 13.9697 15.0303L15.0303 13.9697ZM6.25 15.767C6.25 15.3528 5.91421 15.017 5.5 15.017C5.08579 15.017 4.75 15.3528 4.75 15.767H6.25ZM4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25C5.91421 20.25 6.25 19.9142 6.25 19.5H4.75ZM5.5 18.75C5.08579 18.75 4.75 19.0858 4.75 19.5C4.75 19.9142 5.08579 20.25 5.5 20.25V18.75ZM9.233 20.25C9.64721 20.25 9.983 19.9142 9.983 19.5C9.983 19.0858 9.64721 18.75 9.233 18.75V20.25ZM4.96967 18.9697C4.67678 19.2626 4.67678 19.7374 4.96967 20.0303C5.26256 20.3232 5.73744 20.3232 6.03033 20.0303L4.96967 18.9697ZM11.0303 15.0303C11.3232 14.7374 11.3232 14.2626 11.0303 13.9697C10.7374 13.6768 10.2626 13.6768 9.96967 13.9697L11.0303 15.0303ZM15.767 4.75C15.3528 4.75 15.017 5.08579 15.017 5.5C15.017 5.91421 15.3528 6.25 15.767 6.25V4.75ZM19.5 6.25C19.9142 6.25 20.25 5.91421 20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75V6.25ZM20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75C19.0858 4.75 18.75 5.08579 18.75 5.5H20.25ZM18.75 9.233C18.75 9.64721 19.0858 9.983 19.5 9.983C19.9142 9.983 20.25 9.64721 20.25 9.233H18.75ZM20.0303 6.03033C20.3232 5.73744 20.3232 5.26256 20.0303 4.96967C19.7374 4.67678 19.2626 4.67678 18.9697 4.96967L20.0303 6.03033ZM13.9697 9.96967C13.6768 10.2626 13.6768 10.7374 13.9697 11.0303C14.2626 11.3232 14.7374 11.3232 15.0303 11.0303L13.9697 9.96967ZM6.25 9.233V5.5H4.75V9.233H6.25ZM5.5 6.25H9.233V4.75H5.5V6.25ZM4.96967 6.03033L9.96967 11.0303L11.0303 9.96967L6.03033 4.96967L4.96967 6.03033ZM15.767 20.25H19.5V18.75H15.767V20.25ZM20.25 19.5V15.767H18.75V19.5H20.25ZM20.0303 18.9697L15.0303 13.9697L13.9697 15.0303L18.9697 20.0303L20.0303 18.9697ZM4.75 15.767V19.5H6.25V15.767H4.75ZM5.5 20.25H9.233V18.75H5.5V20.25ZM6.03033 20.0303L11.0303 15.0303L9.96967 13.9697L4.96967 18.9697L6.03033 20.0303ZM15.767 6.25H19.5V4.75H15.767V6.25ZM18.75 5.5V9.233H20.25V5.5H18.75ZM18.9697 4.96967L13.9697 9.96967L15.0303 11.0303L20.0303 6.03033L18.9697 4.96967Z" fill="currentColor"/>
                        </svg>
                    </a>
                </div>

                <div class="interview-list flex-grow-1">
                    <ul class="list-unstyled m-0 p-0">
                        {% for i in 1..5 %}
                        <li class="interview-item">
                            <div class="d-flex justify-content-between">
                                <div class="schedule-left">
                                    <div class="fw-semibold">Company {{ i }}</div>
                                    <div class="small">Position {{ i }}</div>
                                </div>
                                <div class="schedule-right">
                                    <div class="small" style="font-size:12px;">Sep {{ 9+i }}, 2025</div>
                                    <div class="small" style="font-size:12px;">10:00 AM</div>
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.message-box-right {
    flex-direction: column;
    justify-content: end;
}
.list-condensed .list-item + .list-item { border-top: 1px solid rgba(0,0,0,.06); }
  .job-logo { width: 44px; height: 44px; object-fit: cover;border-radius:100%!Important;overflow:hidden; }
  .avatar { width: 40px; height: 40px; object-fit: cover; }
  .link-plain { color: var(--app-primary, #0d6efd); text-decoration: none; margin-right: 20px; }
  .link-plain:hover { text-decoration: underline; }

  /* Circular progress */
  .progress-circle { position: relative; width: 36px; height: 36px; flex-shrink: 0; }
  .progress-circle .pc-bg { stroke: currentColor; opacity: .15; }
  .progress-circle .pc-fg { stroke: currentColor; transform: rotate(-90deg); transform-origin: 50% 50%; }
  .progress-circle .pc-label {
    position: absolute; inset: 0; display: grid; place-items: center;
    font-size: 9px; font-weight: 700; color: #121C0C;
  }
  .progress-circle svg {
    width: 36px;
    height: 36px;
  }

  /* Subtle badge fallbacks if Bootstrap variables exist */
  .bg-primary-subtle { background: rgba(13,110,253,.1) !important; }
  .text-primary { color: #0d6efd !important; }
  .bg-success-subtle { background: rgba(25,135,84,.1) !important; }
  .text-success { color: #198754 !important; }
  .bg-warning-subtle { background: rgba(255,193,7,.12) !important; }
  .text-warning { color: #ffc107 !important; }

  /* Theme color */
:root { --theme-green: #85BB65; }

/* Shared */
.list-condensed .list-item + .list-item { border-top: 1px solid #9F9F9F; margin-top: 4px; padding-top: 4px; }
.link-plain { color: #B7B7B7; text-decoration: none; }
.link-plain:hover { text-decoration: underline;color: #85BB65 }

/* Profile analytics layout bits */
.profile-analytics .sub-title { letter-spacing: .3px; text-transform: none; }

/* Custom dropdown */
.dropdown-lite {
  position: relative;
  display: inline-block;
  width: 100%;
  max-width: 100%;
  outline: none;
}
.dropdown-lite .dl-toggle {
  width: 100%;
  display: flex; align-items: center; justify-content: space-between;
  gap: .5rem;
  background: #fff;
  border: 1px solid #e5e7eb;
  padding: .625rem .75rem;
  border-radius: .5rem;
  color: #111827;
}
.dropdown-lite:hover .dl-toggle,
.dropdown-lite:focus .dl-toggle { border-color: var(--theme-green); }
.dropdown-lite .dl-caret { color: #6b7280; }
.dropdown-lite .dl-menu {
  position: absolute; inset-inline: 0; top: calc(100% + 6px);
  background: #fff; border: 1px solid #e5e7eb; border-radius: .5rem;
  box-shadow: 0 10px 20px rgba(0,0,0,.06);
  padding: .25rem; margin: 0; list-style: none; z-index: 50;
  display: none;
}
.dropdown-lite:hover .dl-menu,
.dropdown-lite:focus-within .dl-menu { display: block; }
.dropdown-lite .dl-item {
  display: block; padding: .5rem .625rem; border-radius: .375rem;
  color: #111827; text-decoration: none;
}
.dropdown-lite .dl-item:hover {
  background: rgba(34, 197, 94, .08);
  color: #85BB65;
}

/* Donut chart */
.donut { position: relative; width: 170px; height: 170px; }
.donut svg { display: block; }
.donut-center {
  position: absolute;
    align-items: center;
  text-align: center;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.donut-number { font-weight: 800; font-size: 32px; line-height: 1; color: #111827; }
.donut-sub { font-size: 14px; color: rgb(37, 41, 48); margin-top: 4px; }

/* Dropdown Lite */
.dropdown-lite {
    position: relative;
}
.dl-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 8px 12px;
    background: #f3f4f6;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
.dl-menu {
    position: absolute;
    top: 110%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    z-index: 10;
}
.dl-item {
    display: block;
    width: 100%;
    padding: 8px 12px;
    background: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
}
.dl-item:hover {
    background: #f9fafb;
}

/* Bar Chart Styling */
.bar-chart .bar-item {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}
.bar-fill {
    height: 8px;
    border-radius: 4px;
    background: var(--bs-primary);
    flex-grow: 1;
}

/* Resume Insight Circle */
.resume-circle {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 8px solid #10b981;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.5rem;
    margin: 0 auto;
}

/* Interview list */
.interview-list .item + .item { border-top: 1px solid rgba(0,0,0,.06); }

/* Calendar icon button */
.btn-icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 36px; height: 36px;
  background: #fff; color: #8F8F8F; text-decoration: none;
}
.btn-icon:hover { color: #85BB65 }
.app-card {
  display: flex;
  flex-direction: column;
}
.app-card-header {
  position: sticky;
  top: 0;
  background-color: #fff;
  z-index: 5;
  border-bottom: 1px solid #e5e7eb;
}
.app-card-header h4 {
  padding: 9px 10px;
}
.app-card-body {
  overflow-y: auto;
  flex: 1;
  max-height: 350px;
}

{#new style#}
.job-section {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background: #fff;
  border-radius: 12px;
}

.job-tab-btn {
  padding: 6px 16px;
  border-radius: 18px;
  border: 1px solid #ddd;
  background: #f9f9f9;
  font-weight: 500;
  transition: 0.2s ease;
}

{#.job-tab-btn.active {
  background: var(--app-primary, #85BB65);
  color: #fff;
  border-color: var(--app-primary, #85BB65);
}#}

.job-list-container {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 320px;
  overflow-y: auto;
  padding-right: 0;
  padding-left: 0;
  margin-right: 0;
  margin-left: 0;
}

.job-list-container::-webkit-scrollbar {
  width: 6px;
}
.job-list-container::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 3px;
}
.job-list-container::-webkit-scrollbar-track {
  background: transparent;
}

.job-card {
  border-radius: 10px;
  background: #F4F9F1;
  border: 1px solid #e6eef6;
  box-shadow: 0 2px 6px rgba(11,22,40,0.03);
  padding: 8px 12px;
  margin-left: 0;
  margin-right: 0;
}

.job-logo-box {
  width: 40px;
  height: 40px;
  background: #f4f4f4;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #d0d0d0;
  flex-shrink: 0;
}

.job-logo-img {
  max-width: 70%;
  max-height: 70%;
  object-fit: contain;
}
.job-title {
    color:#121C0C;
    font-size: 13px;
    line-height: 1.4;
    margin-bottom: 2px;
}

.job-section {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  background: #fff;
  border-radius: 12px;
  padding: 12px !important;
  display: flex;
  flex-direction: column;
  height: 100%; /* ensures it fills the column height */
  position: relative;
}

.job-section > .d-flex.justify-content-between {
  padding-right: 0;
  padding-left: 0;
  margin-bottom: 8px;
}

.job-section .job-list-container {
  padding-right: 0;
  padding-left: 0;
  width: 100%;
  margin-right: 0;
  margin-left: 0;
  overflow-y: auto;
  overflow-x: hidden;
}

.job-section .job-list-container::-webkit-scrollbar {
  width: 6px;
}

.job-section .job-list-container::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 3px;
}

.job-section .job-list-container::-webkit-scrollbar-track {
  background: transparent;
}

.job-section .tab-content {
  padding-left: 0;
  padding-right: 0;
  margin-right: 0;
  margin-left: 0;
  width: 100%;
}

.job-section .job-card:first-child {
  margin-top: 0;
}

.job-section .job-card {
  margin-left: 0;
  margin-right: 0;
  width: 100%;
  box-sizing: border-box;
  padding: 8px 12px;
}


/* Scrollable container showing 4 items */
.job-list-container {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow-y: auto;
  padding-right: 0;
  padding-left: 0;
  margin-right: 0;
  margin-left: 0;
}

/* Each message box */
.job-card {
  border-radius: 8px;
  padding: 8px 12px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

/* Container max-height = 4 items + 3 gaps of 8px each */
.job-list-container {
  max-height: calc(4 * 72px + 3 * 8px);
  padding-right: 0;
  padding-left: 0;
  margin-left: 0;
  margin-right: 0;
}

/* Scrollbar styling */
.job-list-container::-webkit-scrollbar {
  width: 6px;
}
.job-list-container::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 3px;
}
.job-list-container::-webkit-scrollbar-track {
  background: transparent;
}

/* Avatar image */
.job-logo-img {
  width: 40px;
  height: 40px;
  object-fit: cover;
  flex-shrink: 0;
}
.icon-image {
    width:25px;
}
.icon-jobsearch path {
    fill: #121C0C;
}
.app-utility-item a:hover .icon-jobsearch path {
    fill: #85BB65;
}
.app-utility-item a {
    padding: 2px 3px;
    border-radius: 8px;
}
.app-utility-item a:hover {
    background: #f7fef4;
}

/* Generic Card Styling */
.todo-card, .analytics-card, .interview-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* --- To Do List --- */
.todo-list {
    overflow-y: auto;
    max-height: calc(4 * 72px + 3 * 10px); /* 4 visible items */
    padding-right: 6px;
}
.todo-item {
    border-radius: 10px;
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    padding: 2px 14px;
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}

/* --- Interview Schedule --- */
.interview-list {
    overflow-y: auto;
    max-height: calc(4 * 70px + 3 * 8px);
    padding-right: 6px;
}
.interview-item {
    border-radius: 10px;
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    padding: 2px 14px;
    margin-bottom: 8px;
    display: flex;
    flex-direction: column;
}
.analytics-chart {
    border-radius: 10px;
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
}

/* --- Profile Analytics --- */
.analytics-card .donut {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}
.analytics-card .donut-center {
    position: absolute;
    text-align: center;
}
.analytics-card .donut-number {
    font-size: 1.5rem;
    font-weight: 700;
}
#chart-ratio {
    position: relative;
}
.application {
    margin-top: 12px;
    padding-left: 0 !important;
    margin-left: 0 !important;
}
.application .row .col a, .application .row .col a .card {
    margin-bottom: 0!important;
}
.profile-analytics-title {
    height: 32px;
}
.application .card {
  clip-path: polygon(0% 0%,calc(100% - 15px) 0%,100% 50%,calc(100% - 15px) 100%,0% 100%,15px 50%,0% 0%);
  display: flex;
  justify-content: center;
  align-items: center;
  flex: 1 0 auto;
  margin-left: -15px;
  cursor: pointer;
  min-height: 80px;
  height: 100%;
}

/* First card: no left cutout */
.application .col:first-child .card {
    clip-path:none;
    margin-left: -4px;
    min-height: 80px;
    height: 100%;
    align-items: center;
    justify-content: center;
}
.application .col:first-child {
    max-width: 80px;
}
.application .col .card-body {
    display: flex;
    justify-content: center;
    flex-direction: column-reverse;
    text-align: center;
    align-items: center;
    width: 100%;
    height: 100%;
    padding: 0.75rem 1rem;
    margin: 0;
}
.application .col .card-body .card-title {
    font-size: 16px;
    text-align: center;
    width: 100%;
    margin: 0;
    line-height: 1.2;
    display: flex;
    align-items: center;
    justify-content: center;
}
.is-card.is-applied:hover *, .is-card.is-review:hover *, .is-card.is-interview:hover *, .is-card.is-rejected:hover *, .is-card.is-hired:hover *, .is-card.is-offered:hover *, .is-card.is-completed:hover *, .is-card.is-applied.active *, .is-card.is-review.active *, .is-card.is-interview.active *, .is-card.is-rejected.active *, .is-card.is-hired.active *, .is-card.is-offered.active *, .is-card.is-completed.active *, .is-card .card-body p, .is-card .card-body:hover, .application .col .card-body .card-title:hover, .is-card:hover {
    color: rgb(33, 37, 41);
}
.application .col .card-body p {
    font-size: 18px;
    color: #121C0C;
    text-align: center;
    width: 100%;
    margin: 0;
    line-height: 1.2;
    display: flex;
    align-items: center;
    justify-content: center;
}
.application .col:first-child .card .card-body {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    width: 100%;
    height: 100%;
    padding: 0.75rem 1rem;
    margin: 0;
    flex-direction: column;
}
.application .col:nth-child(2) .card {
  clip-path: polygon(0% 0%,calc(100% - 15px) 0%,100% 50%,calc(100% - 15px) 100%,0% 100%,0% 0%);
  margin-left: 0;
}
.application .col:last-child .card {
    clip-path: polygon(0% 0%,100% 0%,100% 100%,0% 100%,15px 50%,0% 0%);
}
.application .col:first-child .card-body p {
    display: none;
}
.application .col:first-child .card-body .card-title {
    font-size: 18px;
}
.col:nth-child(1) .is-card {
  background-color: #D2E6C6;
}
.col:nth-child(2) .is-card {
  background-color: #C7E0B8;
}
.col:nth-child(3) .is-card {
  background-color: #BBDAAA;
}
.col:nth-child(4) .is-card {
  background-color: #AFD39C;
}
.col:nth-child(5) .is-card {
  background-color: #A4CC8E;
}
.col:nth-child(6) .is-card {
  background-color: #99C680;
}
.col:nth-child(7) .is-card {
  background-color: #8DC072;
}
.col:nth-child(8) .is-card {
  background-color: #82B964;
}

.col:nth-child(1) .is-card:hover {
  background-color: #B9F2FF;
}
.col:nth-child(2) .is-card:hover {
  background-color: #ADF0FF;
}
.col:nth-child(3) .is-card:hover {
  background-color: #99ECFF;
}
.col:nth-child(4) .is-card:hover {
  background-color: #85E9FF;
}
.col:nth-child(5) .is-card:hover {
  background-color: #70E5FF;
}
.col:nth-child(6) .is-card:hover {
  background-color: #5CE1FF;
}
.col:nth-child(7) .is-card:hover {
  background-color: #47DDFF;
}
.col:nth-child(8) .is-card:hover {
  background-color: #33DAFF;
}
.job-meta {
    color: #121C0C;
    font-size: 11px;
    line-height: 1.3;
    margin-top: 2px;
}
.apply-within {
    font-size: 11px;
    line-height: 1.3;
}
.apply-within .apply-text {
    color: #000000;
    font-size: 10px;
    margin-bottom: 2px;
}
.apply-within .fw-semibold {
    font-size: 11px;
    font-weight: 600;
}
.message-title {
    color:#121C0C;
    font-size: 12px;
    line-height: 1.4;
    margin-bottom: 2px;
}
.message-badge {
    background: transparent;
    font-size: 12px;
    text-align: right;
    animation: colorChange 1s infinite alternate;
}
@keyframes colorChange {
    0% {
        color: #0096B8;
    }
    100% {
        color: #33DAFF;
    }
}
.mb-10-px {
    margin-bottom: 10px;
}
.fw-semibold, .small {
    color: rgb(37, 41, 48);
}
.schedule-right {
    display: flex;
    flex-direction: column;
    align-items: end;
    justify-content: center;
}
.schedule-left {
    flex: 1;
    gap: 4px;
}
</style>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const matchedTab = document.getElementById('tab-matched-jobs');
    const savedTab = document.getElementById('tab-saved-jobs');
    const matchedPane = document.getElementById('pane-matched-jobs');
    const savedPane = document.getElementById('pane-saved-jobs');
    const viewAllLink = document.getElementById('view-all-link');

    function activateTab(tab) {
        if (tab === 'matched') {
            matchedTab.classList.add('active');
            savedTab.classList.remove('active');
            matchedPane.classList.add('show', 'active');
            savedPane.classList.remove('show', 'active');
            viewAllLink.href = "{{ path('app_provider_jobs_matching') }}";
        } else {
            savedTab.classList.add('active');
            matchedTab.classList.remove('active');
            savedPane.classList.add('show', 'active');
            matchedPane.classList.remove('show', 'active');
            viewAllLink.href = "{{ path('app_provider_jobs_saved') }}";
        }
    }

    matchedTab.addEventListener('click', () => activateTab('matched'));
    savedTab.addEventListener('click', () => activateTab('saved'));
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const toggleBtn = document.querySelector('.dl-toggle');
    const menu = document.querySelector('.dl-menu');
    const label = toggleBtn.querySelector('.dl-label');
    const charts = document.querySelectorAll('.chart-content');

    // Toggle dropdown open/close
    toggleBtn.addEventListener('click', () => {
        menu.classList.toggle('d-none');
    });

    // Handle selection
    document.querySelectorAll('.dl-item').forEach(item => {
        item.addEventListener('click', () => {
            const chartType = item.dataset.chart;

            // Update label
            label.textContent = item.textContent;

            // Show the selected chart
            charts.forEach(c => c.classList.add('d-none'));
            document.getElementById('chart-' + chartType).classList.remove('d-none');

            // Close menu
            menu.classList.add('d-none');
        });
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
        if (!menu.contains(e.target) && !toggleBtn.contains(e.target)) {
            menu.classList.add('d-none');
        }
    });
});
</script>

{# Intro.js CSS & JS for Quick Tour #}
<link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
<script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>

<style>
/* Enhanced Custom styling for Intro.js tour - Dashboard */
.introjs-tooltip {
    max-width: 420px !important;
    min-width: 380px !important;
    border-radius: 12px !important;
    box-shadow: 0 6px 18px rgba(16,24,40,0.06), 0 2px 6px rgba(0, 0, 0, 0.08) !important;
    border: 1px solid #e6eef6 !important;
    overflow: hidden !important;
    background: #ffffff !important;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

.introjs-tooltipReferenceLayer {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

.introjs-tooltipHeader {
    padding: 0 !important;
}

.introjs-tooltipTitle {
    font-size: 18px !important;
    font-weight: 600 !important;
    color: #121C0C !important;
    margin: 0 !important;
    padding: 20px 24px 16px 24px !important;
    line-height: 1.4 !important;
    background: #F4F9F1 !important;
    border-bottom: 1px solid #e6eef6 !important;
}

.introjs-tooltipContent {
    padding: 20px 24px !important;
    font-size: 14px !important;
    line-height: 1.6 !important;
    color: #374151 !important;
    background: #ffffff !important;
    margin: 0 !important;
}

.introjs-tooltipContent p {
    margin: 0 !important;
    color: #374151 !important;
    font-size: 14px !important;
    line-height: 1.6 !important;
}

/* Progress bar */
.introjs-progress {
    background: #e6eef6 !important;
    height: 3px !important;
    border-radius: 0 !important;
}

.introjs-progressbar {
    background: linear-gradient(90deg, #85BB65 0%, #6fa850 100%) !important;
    height: 100% !important;
    border-radius: 0 !important;
}

/* Bullets */
.introjs-bullets {
    padding: 0 24px 16px 24px !important;
    background: #ffffff !important;
    border-top: 1px solid #e6eef6 !important;
}

.introjs-bullets ul {
    display: flex !important;
    justify-content: center !important;
    gap: 8px !important;
    padding: 0 !important;
    margin: 0 !important;
    list-style: none !important;
}

.introjs-bullets ul li {
    width: 8px !important;
    height: 8px !important;
    margin: 0 !important;
    padding: 0 !important;
}

.introjs-bullets ul li a {
    width: 100% !important;
    height: 100% !important;
    background: #d1d5db !important;
    border-radius: 50% !important;
    border: none !important;
    display: block !important;
}

.introjs-bullets ul li a.active {
    background: #85BB65 !important;
    box-shadow: 0 0 0 2px rgba(133, 187, 101, 0.2) !important;
}

/* Buttons */
.introjs-tooltipbuttons {
    padding: 16px 24px 20px 24px !important;
    border-top: 1px solid #e6eef6 !important;
    background: #fafbfc !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    gap: 12px !important;
}

.introjs-button {
    padding: 10px 20px !important;
    border-radius: 8px !important;
    font-size: 14px !important;
    font-weight: 500 !important;
    transition: all 0.2s ease !important;
    cursor: pointer !important;
    border: none !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    min-width: 100px !important;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

.introjs-button.introjs-nextbutton,
.introjs-button.introjs-donebutton {
    background: #85BB65 !important;
    color: #ffffff !important;
    box-shadow: 0 2px 6px rgba(133, 187, 101, 0.2) !important;
    margin-left: auto !important;
}

.introjs-button.introjs-nextbutton:hover,
.introjs-button.introjs-donebutton:hover {
    background: #6fa850 !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 12px rgba(133, 187, 101, 0.3) !important;
}

.introjs-button.introjs-nextbutton:active,
.introjs-button.introjs-donebutton:active {
    transform: translateY(0) !important;
    box-shadow: 0 2px 6px rgba(133, 187, 101, 0.2) !important;
}

.introjs-button.introjs-prevbutton {
    background: #ffffff !important;
    color: #374151 !important;
    border: 1px solid #e6eef6 !important;
    margin-right: auto !important;
}

.introjs-button.introjs-prevbutton:hover {
    background: #F4F9F1 !important;
    color: #121C0C !important;
    border-color: #85BB65 !important;
}

.introjs-button.introjs-skipbutton {
    color: #6b7280 !important;
    background: transparent !important;
    border: none !important;
    font-weight: 500 !important;
    padding: 6px 12px !important;
    min-width: auto !important;
    position: absolute !important;
    top: 16px !important;
    right: 16px !important;
    font-size: 13px !important;
    transition: all 0.2s ease !important;
    z-index: 10 !important;
}

.introjs-button.introjs-skipbutton:hover {
    color: #121C0C !important;
    background: #f1f3f4 !important;
    border-radius: 6px !important;
}

/* Overlay */
.introjs-overlay {
    background: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(2px);
    transition: opacity 0.3s ease !important;
}

/* Helper layer (highlight) */
.introjs-helperLayer {
    box-shadow: 0 0 0 4px rgba(133, 187, 101, 0.2), 0 0 0 8px rgba(133, 187, 101, 0.1) !important;
    border-radius: 12px !important;
    transition: all 0.3s ease !important;
}

/* Arrow */
.introjs-arrow {
    border: 8px solid transparent !important;
}

.introjs-arrow.top {
    border-bottom-color: #ffffff !important;
    top: -16px !important;
}

.introjs-arrow.bottom {
    border-top-color: #ffffff !important;
    bottom: -16px !important;
}

.introjs-arrow.left {
    border-right-color: #ffffff !important;
    left: -16px !important;
}

.introjs-arrow.right {
    border-left-color: #ffffff !important;
    right: -16px !important;
}
</style>

<script>
function startDashboardTour() {
    introJs().setOptions({
        steps: [
            { intro: "Welcome to your Provider Dashboard! Let's take a quick tour." },
            { element: document.querySelector('.applications-card'), intro: "This card shows the total number of applications you've received." },
            { element: document.querySelector('.matched-jobs-card'), intro: "See jobs that match your skills here." },
            { element: document.querySelector('.messages-card'), intro: "Check your messages here to communicate with job seekers." },
            { element: document.querySelector('.todo-card'), intro: "Keep track of your tasks and pending actions here." },
            { element: document.querySelector('.saved-jobs-card'), intro: "Access your bookmarked jobs for easy reference." },
            { intro: "That's it! You're ready to explore your dashboard." }
        ],
        showProgress: true,
        showBullets: true,
        exitOnOverlayClick: false
    }).start();
}

// Initialize tour when Quick Tour button is clicked
document.addEventListener('DOMContentLoaded', function() {
    const quickTourBtn = document.getElementById('start-page-tour');
    if (quickTourBtn) {
        quickTourBtn.addEventListener('click', function(e) {
            e.preventDefault();
            startDashboardTour();
        });
    }
});
</script>

<!-- FINAL OVERRIDE - Force spacing styles to load last and override all other CSS -->
<style>
/* COMPLETE RESET - Final override at end of page */
body.app .app-wrapper {
    position: relative !important;
    display: block !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    width: 100% !important;
}

body.app .app-wrapper .app-content {
    position: relative !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    max-width: 100% !important;
    width: 100% !important;
}

body.app .app-wrapper .app-content .container-xl,
.app-wrapper .app-content .container-xl,
.app-content .container-xl,
.dashboard .container-xl,
div.container-xl,
[class*="container-xl"],
.container-xl {
    position: relative !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 30px !important;
    max-width: 100% !important;
    width: 100% !important;
    transform: none !important;
    box-sizing: border-box !important;
}

/* Remove left padding from application status tracker */
.container-xl .application {
    padding-left: 0 !important;
    margin-left: 0 !important;
}

/* Column width adjustments to fill space better */
.container-xl .row.g-2 > .col-12.col-lg-7 {
    flex: 0 0 58.333333% !important;
    max-width: 58.333333% !important;
}

.container-xl .row.g-2 > .col-12.col-lg-5 {
    flex: 0 0 41.666667% !important;
    max-width: 41.666667% !important;
}

.container-xl .row {
    margin-left: 0 !important;
    margin-right: 0 !important;
    width: 100% !important;
}

@media (min-width: 1200px) {
    body.app .app-wrapper {
        position: relative !important;
        margin-left: 250px !important;
        transform: translateX(-150px) !important;
        width: calc(100% - 250px + 150px) !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        position: relative !important;
        padding-left: 0 !important;
        padding-right: 30px !important;
        max-width: 100% !important;
        width: 100% !important;
    }
    
    .container-xl .application {
        padding-left: 0 !important;
        margin-left: 0 !important;
    }
}

/* CRITICAL: Override custom.css media queries with maximum specificity - FINAL OVERRIDE */
@media (min-width: 576px) {
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        padding-left: 0 !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
        margin-left: 0 !important;
    }
}

@media (min-width: 992px) {
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        padding-left: 0 !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
        margin-left: 0 !important;
    }
}

@media (min-width: 1200px) {
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        padding-left: 0 !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
        margin-left: 0 !important;
    }
}

@media (min-width: 1600px) {
    body.app .app-wrapper .app-content,
    .app-wrapper .app-content,
    .app-content {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        padding-left: 0 !important;
    }
    
    body.app .app-wrapper .app-content .container-xl,
    .app-wrapper .app-content .container-xl,
    .app-content .container-xl,
    .dashboard .container-xl,
    div.container-xl,
    [class*="container-xl"],
    .container-xl {
        padding-left: 0 !important;
        padding-right: 30px !important;
        margin-left: 0 !important;
    }
}
</style>

<script>
// Force apply styles via JavaScript - COMPLETE OVERRIDE - Run multiple times to ensure it sticks
function applySpacingStyles() {
    // Reset and apply container-xl styles
    const container = document.querySelector('.container-xl');
    if (container) {
        container.style.setProperty('position', 'relative', 'important');
        container.style.setProperty('padding-left', '0', 'important');
        container.style.setProperty('padding-right', '30px', 'important');
        container.style.setProperty('margin-left', '0', 'important');
        container.style.setProperty('margin-right', '0', 'important');
        container.style.setProperty('transform', 'none', 'important');
        container.style.setProperty('max-width', '100%', 'important');
        container.style.setProperty('width', '100%', 'important');
    }
    
    // Remove left padding from application status tracker
    const application = document.querySelector('.application');
    if (application) {
        application.style.setProperty('padding-left', '0', 'important');
        application.style.setProperty('margin-left', '0', 'important');
    }
    
    // Reset app-content
    const appContent = document.querySelector('.app-content');
    if (appContent) {
        appContent.style.setProperty('position', 'relative', 'important');
        appContent.style.setProperty('padding-left', '0', 'important');
        appContent.style.setProperty('padding-right', '0', 'important');
        appContent.style.setProperty('margin-left', '0', 'important');
        appContent.style.setProperty('margin-right', '0', 'important');
        appContent.style.setProperty('max-width', '100%', 'important');
        appContent.style.setProperty('width', '100%', 'important');
    }
    
    // Reset app-wrapper
    const appWrapper = document.querySelector('.app-wrapper');
    if (appWrapper) {
        appWrapper.style.setProperty('position', 'relative', 'important');
        if (window.innerWidth >= 1200) {
            appWrapper.style.setProperty('margin-left', '250px', 'important');
            appWrapper.style.setProperty('transform', 'translateX(-150px)', 'important');
            appWrapper.style.setProperty('width', 'calc(100% - 250px + 150px)', 'important');
        } else {
            appWrapper.style.setProperty('margin-left', '0', 'important');
            appWrapper.style.setProperty('transform', 'none', 'important');
            appWrapper.style.setProperty('width', '100%', 'important');
        }
        appWrapper.style.setProperty('margin-right', '0', 'important');
        appWrapper.style.setProperty('padding-left', '0', 'important');
        appWrapper.style.setProperty('padding-right', '0', 'important');
    }
    
    // Remove padding from all rows and first columns
    const rows = document.querySelectorAll('.container-xl .row');
    rows.forEach(row => {
        row.style.setProperty('margin-left', '0', 'important');
        row.style.setProperty('padding-left', '0', 'important');
    });
    
    const firstCols = document.querySelectorAll('.container-xl .row > [class*="col-"]:first-child');
    firstCols.forEach(col => {
        col.style.setProperty('padding-left', '0', 'important');
        col.style.setProperty('margin-left', '0', 'important');
    });
    
    // Adjust column widths
    const col7 = document.querySelector('.col-12.col-lg-7');
    const col5 = document.querySelector('.col-12.col-lg-5');
    if (col7) {
        col7.style.setProperty('flex', '0 0 58.333333%', 'important');
        col7.style.setProperty('max-width', '58.333333%', 'important');
    }
    if (col5) {
        col5.style.setProperty('flex', '0 0 41.666667%', 'important');
        col5.style.setProperty('max-width', '41.666667%', 'important');
    }
}

// Run immediately
document.addEventListener('DOMContentLoaded', applySpacingStyles);

// Run after a short delay to override any late-loading styles
setTimeout(applySpacingStyles, 100);
setTimeout(applySpacingStyles, 500);

// Re-apply on window resize to override any responsive changes
window.addEventListener('resize', function() {
    setTimeout(applySpacingStyles, 50);
});
</script>
{% endblock %}
