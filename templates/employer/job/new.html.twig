{% extends 'employer/base.html.twig' %}

{% block title %}New Job{% endblock %}

{% block employer_body %}
    <div class="container-xl">
        <h1 class="app-page-title">Create new job</h1>

        {{ include('employer/job/_form.html.twig') }}
    </div>
{% endblock %}

{% block footer_scripts %}
    <script src="{{ asset('assets/admin/js/form-validation.js') }}"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
        $(".js-datepicker").flatpickr();
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('.job-posting-form');

            if (form) {
                form.addEventListener('submit', function (event) {
                    // Update all CKEditor instances
                    if (typeof CKEDITOR !== 'undefined') {
                        for (let instance in CKEDITOR.instances) {
                            CKEDITOR.instances[instance].updateElement();
                        }
                    }

                    // Let your existing validation logic run
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }

                    form.classList.add('was-validated');
                }, false);
            }
        });
    </script>

{% endblock %}