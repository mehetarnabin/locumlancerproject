{% extends 'employer/base.html.twig' %}

{% block title %}My Applications{% endblock %}

{% block employer_body %}

<style>
.job-header, .job-row {
    display: flex;
    align-items: center;
}

.col-job,
.col-location,
.col-schedule,
.col-expiry,
.col-start,
.col-action {
    flex: 1;
    min-width: 130px;
}
.col-job {
    flex: 2;
}
.job-header {
    padding-left: 14px;
    padding-right: 14px;
    color: #121C0C;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    border-radius: 10px;
    border: 1px solid #e6eef6;
    height: 48px;
    margin-bottom: 2px;
}
.job-row {
    border: none;
    padding: 3px 14px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin: 2px 0;
    font-size: 14px;
    border-radius: 10px;
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
}
.truncate-text {
    display: inline-block;
    max-width: 180px; /* Adjust as needed */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: middle;
}
.job-section {
    background-color: #fff;
}
.job-check {
    margin-right: 8px;
    transform: scale(1.2);
}
#toggleActions {
    padding: 6px 16px;
    border-radius: 18px;
    border: 1px solid #ddd;
    font-size: 16px;
    color: #fff;
}
.job-meta {
    margin-top: 1px;
}
.ml-15-px {
    margin-left: 15px;
}
.mr-15-px {
    margin-right: 15px;
}
.action-btn {
    background: transparent;
    border: none;
    padding: 0 4px;
}

.custom-dropdown {
  position: absolute;
  top: 110%;
  left: 0;
  background: #fff;
  padding: 10px;
  min-width: 150px;
  z-index: 1000;
  border: 1px solid #e6eef6;
  box-shadow: 0 2px 6px rgba(11,22,40,0.03);
  border-radius: 10px;
}

.hidden {
  display: none;
}

.columns-panel label {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
  cursor: pointer;
  font-weight: 400;
  color: #121C0C;
}

.menu-panel .menu-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  cursor: pointer;
  color: #121C0C;
}

.menu-panel svg {
  width: 16px;
  height: 16px;
}

.dropdown-cstm {
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    border-radius: 10px;
    padding: 4px 12px;
}

.menu-panel {
    min-width: 160px;
}

.columns-panel input[type="checkbox"] {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #e6eef6;
  border-radius: 4px;
  background-color: #fff;
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

.columns-panel input[type="checkbox"]:checked {
  background-color: #47ddff; /* Your custom fill color */
  border-color: #47ddff;
}

.columns-panel input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 5px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.col-check input[type="checkbox"] {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid #e6eef6;
  border-radius: 4px;
  background-color: #fff;
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

.col-check input[type="checkbox"]:checked {
  background-color: #47ddff; /* Your custom fill color */
  border-color: #47ddff;
}

.col-check input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 5px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.job-title {
    color: #121C0C;
}

.action-btn {
    background: #F4F9F1;
    border: 1px solid #e6eef6;
    box-shadow: 0 2px 6px rgba(11,22,40,0.03);
    border-radius: 10px;
    padding: 4px 12px;
    display: flex;
    gap: 6px;
    align-items: center;
}
.action-btn, ..dropdown-cstm {
    transition: all 0.2s ease;
}
.action-btn:hover, .dropdown-cstm:hover {
    color: #85BB65;
    border: 1px solid #85BB65;
    transition: all 0.2s ease;
}
.action-btn:hover svg {
    color: #85BB65;
}
#delete-btn:hover {
    color: #BA1824;
    border: 1px solid #BA1824;
    transition: all 0.2s ease; 
}
#delete-btn:hover svg {
    color: #BA1824;
}
.col-center {
    text-align: center;
}
.col-rank {
    min-width: 50px;
    max-width: 50px;
}
.application .card {
  clip-path: polygon(0% 0%,calc(100% - 15px) 0%,100% 50%,calc(100% - 15px) 100%,0% 100%,15px 50%,0% 0%);
  display: flex;
  justify-content: center;
  align-items: center;
  flex: 1 0 auto;
  margin-left: -15px;
  cursor: pointer;
}

/* First card: no left cutout */
.application .col:first-child .card {
    clip-path:none;
    margin-left: 0;
    height: 65px;
    align-items: center;
    justify-content: center;
}
.application .col:first-child {
    max-width: 80px;
}
.application .col .card-body {
    justify-content: center;
    flex-direction: column-reverse;
    text-align: center;
    align-items: center;
}
.application .col .card-body .card-title {
    font-size: 16px;
}
.is-card.is-applied:hover *, .is-card.is-review:hover *, .is-card.is-interview:hover *, .is-card.is-rejected:hover *, .is-card.is-hired:hover *, .is-card.is-offered:hover *, .is-card.is-completed:hover *, .is-card.is-applied.active *, .is-card.is-review.active *, .is-card.is-interview.active *, .is-card.is-rejected.active *, .is-card.is-hired.active *, .is-card.is-offered.active *, .is-card.is-completed.active *, .is-card .card-body p, .is-card .card-body:hover, .application .col .card-body .card-title:hover, .is-card:hover {
    color: rgb(33, 37, 41);
}
.application .col .card-body p {
    font-size: 18px;
    color: #121C0C;
}
.application .col:first-child .card .card-body {
    align-items: center;
}
.application .col:nth-child(2) .card {
  clip-path: polygon(0% 0%,calc(100% - 15px) 0%,100% 50%,calc(100% - 15px) 100%,0% 100%,0% 0%);
  margin-left: 0;
}
.application .col:last-child .card {
    clip-path: polygon(0% 0%,100% 0%,100% 100%,0% 100%,15px 50%,0% 0%);
}
.application .col:first-child .card-body p {
    display: none;
}
.application .col:first-child .card-body .card-title {
    font-size: 18px;
}
.col:nth-child(1) .is-card {
  background-color: #D2E6C6;
}
.col:nth-child(2) .is-card {
  background-color: #C7E0B8;
}
.col:nth-child(3) .is-card {
  background-color: #BBDAAA;
}
.col:nth-child(4) .is-card {
  background-color: #AFD39C;
}
.col:nth-child(5) .is-card {
  background-color: #A4CC8E;
}
.col:nth-child(6) .is-card {
  background-color: #99C680;
}
.col:nth-child(7) .is-card {
  background-color: #8DC072;
}
.col:nth-child(8) .is-card {
  background-color: #82B964;
}

.col:nth-child(1) .is-card:hover {
  background-color: #B9F2FF;
}
.col:nth-child(2) .is-card:hover {
  background-color: #ADF0FF;
}
.col:nth-child(3) .is-card:hover {
  background-color: #99ECFF;
}
.col:nth-child(4) .is-card:hover {
  background-color: #85E9FF;
}
.col:nth-child(5) .is-card:hover {
  background-color: #70E5FF;
}
.col:nth-child(6) .is-card:hover {
  background-color: #5CE1FF;
}
.col:nth-child(7) .is-card:hover {
  background-color: #47DDFF;
}
.col:nth-child(8) .is-card:hover {
  background-color: #33DAFF;
}
.col .is-card.is-applied.active {
    background-color: #99ECFF;
}
.col .is-card.is-interview.active {
    background-color: #85E9FF;
}
.col .is-card.is-offered.active {
    background-color: #70E5FF;
}
.col .is-card.is-hired.active {
    background-color: #5CE1FF;
}
.col .is-card.is-completed.active {
    background-color: #47DDFF;
}
.badge.badge-pill {
    background: none;
    animation: colorChange 1s infinite alternate;
    font-weight: 400 !important;
}
@keyframes colorChange {
    0% {
        color: #0096B8;
    }
    100% {
        color: #33DAFF;
    }
}
.job-actions a {
    color : #000;
}
.job-actions a:hover {
    color : #85BB65;
}
.is-rejected, .rejected {
    border: none;
}
</style>

    {% set statusColors = {
        'applied': 'applied',
        'in_review': 'review',
        'interview': 'interview',
        'offered': 'offered',
        'rejected': 'rejected',
        'hired': 'hired',
        'completed': 'completed'
    } %}

    {% set allStatuses = ['applied', 'in_review', 'interview', 'offered', 'rejected', 'hired', 'completed'] %}

    <div class="container-xl">
        <div class="job-section shadow-lg p-3 rounded-3">

            <div class="application">
                <div class="row g-2 mb-3">
                    <div class="col">
                        <a href="{{ path('app_employer_applications') }}">
                            <div class="card is-card mb-3 is-applied {% if app.request.get('status') == '' %}active{% endif %}">
                                <div class="card-body">
                                    <h6 class="card-title">All</h6>
                                    <p class="card-text">{{ totalApplications|number_format }}</p>
                                </div>
                            </div>
                        </a>
                    </div>

                    {% for status in allStatuses %}
                        {% set count = 0 %}
                        {% for item in statusCounts %}
                            {% if item.status == status %}
                                {% set count = item.count %}
                            {% endif %}
                        {% endfor %}
                        <div class="col">
                            <a href="{{ path('app_employer_applications', {'status': status}) }}">
                                <div class="card is-card mb-3 is-{{ statusColors[status] }} {% if app.request.get('status') == status %}active{% endif %}">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ status | replace({'_': ' '}) | title }}</h6>
                                        <p class="card-text">{{ count }}</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <div class="actions-container d-flex justify-content-between align-items-center ml-15-px mr-15-px">
                <div class="job-actions" style="display: flex; gap: 8px; align-items: center;">
                  {% if app.request.get('status') not in ['in_review', 'interview', 'offered', 'rejected', 'hired', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> View Application
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Shortlist
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Reject
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Download CV
                  </button>
                  {% endif %}
                  {% if app.request.get('status') not in ['applied', 'interview', 'offered', 'rejected', 'hired', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Schedule Interview
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Message
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Reject
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Add Note
                  </button>
                  {% endif %}
                  {% if app.request.get('status') not in ['applied', 'in_review', 'offered', 'rejected', 'hired', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Offer
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Message
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Reject
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Add Feedback
                  </button>
                  {% endif %}
                  {% if app.request.get('status') not in ['applied', 'in_review', 'interview', 'offered', 'hired', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> View Reason
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Reconsider
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Message
                  </button>
                  {% endif %}
                  {% if app.request.get('status') not in ['applied', 'in_review', 'interview', 'rejected', 'hired', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Offer Letter
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Accepted
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Rejected
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Message
                  </button>
                  {% endif %}
                  {% if app.request.get('status') not in ['applied', 'in_review', 'interview', 'offered', 'rejected', 'completed'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Completed
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Request Documents
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Send Message
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> View Contract
                  </button>
                  {% endif %}
                  {% if app.request.get('status') not in ['applied', 'in_review', 'interview', 'offered', 'rejected', 'hired'] %}
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> View History
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Add Feedback
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> Archive
                  </button>
                  <button id="apply-btn" class="action-btn" disabled title="Apply">
                    <svg class="icon-image" fill="currentcolor" width="25" height="25" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g data-name="Layer 2">
                    <g data-name="checkmark-circle">
                    <rect width="24" height="24" opacity="0"/>
                    <path d="M9.71 11.29a1 1 0 0 0-1.42 1.42l3 3A1 1 0 0 0 12 16a1 1 0 0 0 .72-.34l7-8a1 1 0 0 0-1.5-1.32L12 13.54z"/>
                    <path d="M21 11a1 1 0 0 0-1 1 8 8 0 0 1-8 8A8 8 0 0 1 6.33 6.36 7.93 7.93 0 0 1 12 4a8.79 8.79 0 0 1 1.9.22 1 1 0 1 0 .47-1.94A10.54 10.54 0 0 0 12 2a10 10 0 0 0-7 17.09A9.93 9.93 0 0 0 12 22a10 10 0 0 0 10-10 1 1 0 0 0-1-1z"/>
                    </g>
                    </g>
                    <use xlink:href="#icon-apply"/>
                    </svg> View Message
                  </button>
                  {% endif %}
                  <div class="hidden-buttons d-flex" style="gap:8px; align-items:cneter; visibility: hidden;">
                    
                  </div>
                </div>
                <div class="col-dropdowns d-flex gap-2">
                  <!-- Columns Dropdown -->
                  <div class="columns-dropdown position-relative">
                    <button type="button" class="columns-dropdown-btn dropdown-cstm"><span>Columns</span></button>
                    <div class="dropdown-panel columns-panel custom-dropdown hidden">
                      <label><input type="checkbox" value="salary"> Salary</label>
                      <label><input type="checkbox" value="location"> Location</label>
                      <label><input type="checkbox" value="date-posted"> Date Posted</label>
                      <label><input type="checkbox" value="deadline"> Deadline</label>
                      <label><input type="checkbox" value="date-applied"> Date Applied</label>
                      <label><input type="checkbox" value="excitement"> Rank</label>
                    </div>
                  </div>

                  <!-- Menu Dropdown -->
                  <div class="menu-dropdown position-relative">
                    <button type="button" class="menu-dropdown-btn dropdown-cstm"><span>Menu</span></button>
                    <div class="dropdown-panel menu-panel custom-dropdown hidden">
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="Warning / Info">
                        <path id="Vector" d="M12 11V16M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21ZM12.0498 8V8.1L11.9502 8.1002V8H12.0498Z" stroke="#121C0C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
                        </svg> Quick Tour</div>
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.5" d="M20.5 7V13C20.5 16.7712 20.5 18.6569 19.3284 19.8284C18.1569 21 16.2712 21 12.5 21H11.5C7.72876 21 5.84315 21 4.67157 19.8284C3.5 18.6569 3.5 16.7712 3.5 13V7" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M2 5C2 4.05719 2 3.58579 2.29289 3.29289C2.58579 3 3.05719 3 4 3H20C20.9428 3 21.4142 3 21.7071 3.29289C22 3.58579 22 4.05719 22 5C22 5.94281 22 6.41421 21.7071 6.70711C21.4142 7 20.9428 7 20 7H4C3.05719 7 2.58579 7 2.29289 6.70711C2 6.41421 2 5.94281 2 5Z" stroke="#121C0C" stroke-width="1.5"/>
                        <path d="M12 7L12 16M12 16L15 12.6667M12 16L9 12.6667" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg> Archived Jobs</div>
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.44 8.8999C20.04 9.2099 21.51 11.0599 21.51 15.1099V15.2399C21.51 19.7099 19.72 21.4999 15.25 21.4999H8.73998C4.26998 21.4999 2.47998 19.7099 2.47998 15.2399V15.1099C2.47998 11.0899 3.92998 9.2399 7.46998 8.9099" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15.0001V3.62012" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M15.35 5.85L12 2.5L8.65002 5.85" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg> Export Report</div>
                      <div class="menu-item"><svg width="25" height="25" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16.44 8.8999C20.04 9.2099 21.51 11.0599 21.51 15.1099V15.2399C21.51 19.7099 19.72 21.4999 15.25 21.4999H8.73998C4.26998 21.4999 2.47998 19.7099 2.47998 15.2399V15.1099C2.47998 11.0899 3.92998 9.2399 7.46998 8.9099" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15.0001V3.62012" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M15.35 5.85L12 2.5L8.65002 5.85" stroke="#121C0C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg> Download Data</div>
                    </div>
                  </div>
                </div>
            </div>

            {% if applications|length > 0 %}
            <div class="job-list-container bg-light p-3 rounded-3">
                <div class="d-flex align-items-center job-lists">
                    <div class="d-flex align-items-center flex-grow-1">
                        <div class="job-header d-flex align-items-center gap-2 fw-semibold py-2 flex-grow-1">
                            <div class="col-check" style="width: 25px;">
                                <input type="checkbox" id="select-all-checkbox" class="job-check" title="Select All" />
                            </div>
                            <div class="col-job flex-grow-2">Job</div>
                            <div class="col-start col-center flex-grow-1">Provider</div>
                            <div class="col-start col-center flex-grow-1">Location</div>
                            <div class="col-expiry col-center flex-grow-1">Schedule</div>
                            <div class="col-start col-center flex-grow-1">Applied At</div>           
                            <div class="col-start col-center flex-grow-1">Status</div>
                        </div>
                    </div>
                </div>

                {% for application in applications %}
                    {% set job = application.job %}
                    <div class="d-flex align-items-center job-lists">
                        <div class="job-row d-flex align-items-center flex-grow-1 gap-2">
                            <div class="col-check" style="width: 25px;">
                                <input type="checkbox" class="job-check job-checkbox" data-job-id="{{ job.id }}" />
                            </div>
                            <div class="col-job d-flex align-items-center gap-2 flex-grow-2">
                                <img src="{{ job.companyLogo|default(asset('assets/icons/job.png')) }}"
                                     alt="Logo"
                                     style="width: 40px; height: 40px; border-radius: 8px;" />
                                <div class="flex-grow-2">
                                    <a class="job-title truncate-text d-block fw-semibold text-decoration-none"
                                       href="{{ path('app_employer_job_applications', {'id': job.id, 'applicationId': application.id}) }}">
                                        {{ job.title }}
                                    </a>
                                </div>
                            </div>
                            <div class="col-start col-center flex-grow-1">{{ application.provider }}</div>
                            <div class="col-start col-center flex-grow-1">{{ job.state }}</div>
                            <div class="col-start col-center flex-grow-1">{{ job.schedule }}}</div>
                            <div class="col-start col-center flex-grow-1">{{ application.createdAt|date('m/d/Y') }}</div>
                            <div class="col-start col-center flex-grow-1">
                                <span class="badge badge-pill is-{{ statusColors[application.status] }}">
                                        {{ application.status | replace({'_': ' '}) | title }}
                                </span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {% else %}
                <p>Applications not found.</p>
            {% endif %}
        </div>
    </div>

    <!-- Send Contract Modal -->
    <div class="modal fade" id="contractModal" tabindex="-1" role="dialog" aria-labelledby="contractModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contractModalLabel">Send Contract</h5>
                </div>
                <form method="post" action="" enctype="multipart/form-data">
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="file" name="contractFile" required />
                        </div>
                    </div>
                    <div class="modal-footer">
                        {#                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>#}
                        <button type="submit" class="btn btn-primary">Send</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Ask Document Modal -->
    <div class="modal fade" id="askDocumentModal" tabindex="-1" aria-labelledby="askDocumentLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" id="askDocumentLabel">Request Document</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <form action="" method="POST">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="documentName" class="form-label">Document Name</label>
                            <input type="text" class="form-control" id="documentName" name="document_name" required>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Send Request</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <!-- Interview Modal -->
    <div class="modal fade" id="interviewModal" tabindex="-1" aria-labelledby="interviewLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" id="interviewLabel">Schedule Interview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <form action="" method="POST">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="meeting_date" class="form-label">Meeting Date</label>
                            <input type="text" class="form-control js-datepicker" id="meeting_date" name="meeting_date" required>
                        </div>
                        <div class="mb-3">
                            <label for="meeting_platform" class="form-label">Meeting Platform</label>
                            <select class="form-control" id="meeting_platform" name="meeting_platform" required>
                                <option value="">Choose Platform</option>
                                <option value="Zoom">Zoom</option>
                                <option value="Microsoft Teams">Microsoft Teams</option>
                                <option value="Google Meet">Google Meet</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="meeting_url" class="form-label">Meeting URL</label>
                            <input type="url" class="form-control" id="meeting_url" name="meeting_url" required>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Send Schedule</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
{% endblock %}

{% block footer_scripts %}
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
        $(".js-datepicker").flatpickr({
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            time_24hr: true // optional: use 24-hour format
        });
    </script>

<script>
    $(document).ready(function() {
        $('#contractModal').on('show.bs.modal', function(event) {
            var button = $(event.relatedTarget); // Button that triggered the modal
            var applicationId = button.data('application_id'); // Get application ID
            var form = $(this).find('form'); // Find the form inside the modal
            var actionUrl = "{{ path('app_employer_application_sendcontract', {'id': 'APPLICATION_ID'}) }}".replace('APPLICATION_ID', applicationId);
            form.attr('action', actionUrl); // Set the form action
        });
    });

    $(document).ready(function() {
        $('#askDocumentModal').on('show.bs.modal', function(event) {
            var button = $(event.relatedTarget); // Button that triggered the modal
            var applicationId = button.data('application_id'); // Get application ID
            var form = $(this).find('form'); // Find the form inside the modal
            var actionUrl = "{{ path('app_employer_application_askfordocument', {'id': 'APPLICATION_ID'}) }}".replace('APPLICATION_ID', applicationId);
            form.attr('action', actionUrl); // Set the form action
        });
    });

    $(document).ready(function() {
        $('#interviewModal').on('show.bs.modal', function(event) {
            var button = $(event.relatedTarget); // Button that triggered the modal
            var applicationId = button.data('application_id'); // Get application ID
            var form = $(this).find('form'); // Find the form inside the modal
            var actionUrl = "{{ path('app_employer_application_scheduleinterview', {'id': 'APPLICATION_ID'}) }}".replace('APPLICATION_ID', applicationId);
            form.attr('action', actionUrl); // Set the form action
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
    const checkboxes = document.querySelectorAll('.job-checkbox');
    const applyBtn = document.getElementById('apply-btn');
    const saveBtn = document.getElementById('save-btn');
    const deleteBtn = document.getElementById('delete-btn');
    const actionsDivs = document.querySelectorAll('.hidden-buttons');
    const selectAllCheckbox = document.getElementById('select-all-checkbox');
    const columnsBtn = document.querySelector('.columns-dropdown-btn');
    const menuBtn = document.querySelector('.menu-dropdown-btn');
    const columnsPanel = document.querySelector('.columns-panel');
    const menuPanel = document.querySelector('.menu-panel');

    function toggleDropdown(panel, btn) {
        const isOpen = !panel.classList.contains('hidden');
        closeAllDropdowns();
        if (!isOpen) panel.classList.remove('hidden');
    }

    function closeAllDropdowns() {
        columnsPanel.classList.add('hidden');
        menuPanel.classList.add('hidden');
    }

    columnsBtn.addEventListener('click', e => {
        e.stopPropagation();
        toggleDropdown(columnsPanel, columnsBtn);
    });

    menuBtn.addEventListener('click', e => {
        e.stopPropagation();
        toggleDropdown(menuPanel, menuBtn);
    });

    document.addEventListener('click', e => {
        // Only close if click is outside both dropdowns and buttons
        if (
          !columnsPanel.contains(e.target) &&
          !columnsBtn.contains(e.target) &&
          !menuPanel.contains(e.target) &&
          !menuBtn.contains(e.target)
        ) {
          closeAllDropdowns();
        }
    });

    if (selectAllCheckbox) {
      selectAllCheckbox.addEventListener('change', function () {
        checkboxes.forEach(cb => {
          cb.checked = selectAllCheckbox.checked;
        });
        toggleActionsVisibility();
        updateActions();
      });

      // Sync master checkbox if user manually toggles individual ones
      checkboxes.forEach(cb => {
        cb.addEventListener('change', function () {
          const allChecked = Array.from(checkboxes).every(cb => cb.checked);
          selectAllCheckbox.checked = allChecked;
        });
      });
    }

    function toggleActionsVisibility() {
      const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
      actionsDivs.forEach(div => {
        div.style.visibility = anyChecked ? 'visible' : 'hidden';
      });
    }

    checkboxes.forEach(cb => {
      cb.addEventListener('change', toggleActionsVisibility);
    });

    // Initial check in case some boxes are pre-checked
    toggleActionsVisibility();

    function updateActions() {
      const checked = Array.from(checkboxes).filter(cb => cb.checked);
      applyBtn.disabled = checked.length !== 1;
    }

    checkboxes.forEach(cb => {
      cb.addEventListener('change', updateActions);
    });

    applyBtn.addEventListener('click', () => {
      const selected = Array.from(checkboxes).filter(cb => cb.checked);
      if (selected.length === 1) {
        const jobId = selected[0].dataset.jobId;
        // Trigger apply logic here
        console.log('Applying to job:', jobId);
      }
    });

    saveBtn.addEventListener('click', () => {
      const selectedIds = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.dataset.jobId);
      // Trigger batch save logic here
      console.log('Saving jobs:', selectedIds);
    });

    deleteBtn.addEventListener('click', () => {
      const selectedIds = Array.from(checkboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.dataset.jobId);
      // Trigger batch delete logic here
      console.log('Deleting jobs:', selectedIds);
    });
  });
</script>
{% endblock %}